/**
 * Node System - Foundation for Infinite Complexity
 *
 * Architecture:
 * - Generator nodes: Create base visual patterns
 * - Effect nodes: Transform and enhance visuals
 * - Composition nodes: Combine multiple layers
 * - Control params: Audio-reactive or evolving parameters
 *
 * The AI orchestrator commands these nodes to create 100+ unique visual states
 */
import { DeepAudioFeatures } from '../deep-audio-analyzer.js';
/**
 * Control Parameter - Can be static, evolving, or audio-reactive
 */
export interface ControlParam {
    type: 'static' | 'evolving' | 'audio-reactive';
    value?: number;
    startValue?: number;
    endValue?: number;
    curve?: 'linear' | 'ease-in' | 'ease-out' | 'ease-in-out' | 'sine' | 'bounce';
    audioSource?: AudioSource;
    audioRange?: [number, number];
    smoothing?: number;
}
/**
 * Audio sources that can drive parameters
 */
export type AudioSource = {
    type: 'rms';
} | {
    type: 'bass';
} | {
    type: 'mid';
} | {
    type: 'high';
} | {
    type: 'spectralCentroid';
} | {
    type: 'spectralFlux';
} | {
    type: 'beat';
    confidence?: number;
} | {
    type: 'mfcc';
    coefficient: number;
} | {
    type: 'chroma';
    note: number;
};
/**
 * Base Node interface
 */
export interface Node {
    id: string;
    type: 'generator' | 'effect' | 'composition';
    enabled: boolean;
    startTime: number;
    endTime: number;
    fadeIn?: number;
    fadeOut?: number;
    params: Record<string, any>;
}
/**
 * Generator Node - Creates base visual patterns
 */
export interface GeneratorNode extends Node {
    type: 'generator';
    generator: GeneratorType;
}
export type GeneratorType = {
    name: 'perlin-noise';
    octaves: ControlParam;
    scale: ControlParam;
    speed?: ControlParam;
} | {
    name: 'particles';
    count: ControlParam;
    size: ControlParam;
    speed: ControlParam;
} | {
    name: 'fractal';
    iterations: ControlParam;
    zoom: ControlParam;
} | {
    name: 'voronoi';
    points: ControlParam;
    distance: ControlParam;
} | {
    name: 'flow-field';
    resolution: ControlParam;
    strength: ControlParam;
    speed?: ControlParam;
} | {
    name: 'waves';
    frequency: ControlParam;
    amplitude: ControlParam;
} | {
    name: 'radial-waves';
    frequency: ControlParam;
    amplitude: ControlParam;
    speed: ControlParam;
} | {
    name: 'geometric';
    sides: ControlParam;
    rotation: ControlParam;
    scale: ControlParam;
} | {
    name: 'solid-color';
    color: ControlParam;
} | {
    name: 'circles';
    count: ControlParam;
    radius: ControlParam;
} | {
    name: 'lines';
    count: ControlParam;
    thickness: ControlParam;
} | {
    name: 'grid';
    columns: ControlParam;
    rows: ControlParam;
} | {
    name: 'plasma';
    complexity: ControlParam;
    speed: ControlParam;
};
/**
 * Effect Node - Transforms visuals
 */
export interface EffectNode extends Node {
    type: 'effect';
    effect: EffectType;
}
export type EffectType = {
    name: 'blur';
    radius: ControlParam;
} | {
    name: 'bloom';
    threshold: ControlParam;
    intensity: ControlParam;
} | {
    name: 'kaleidoscope';
    segments: ControlParam;
    rotation: ControlParam;
} | {
    name: 'color-grade';
    hue: ControlParam;
    saturation: ControlParam;
    brightness: ControlParam;
} | {
    name: 'feedback';
    amount: ControlParam;
    decay: ControlParam;
} | {
    name: 'displacement';
    strength: ControlParam;
    scale: ControlParam;
} | {
    name: 'chromatic-aberration';
    amount: ControlParam;
} | {
    name: 'grain';
    amount: ControlParam;
} | {
    name: 'vignette';
    intensity: ControlParam;
} | {
    name: 'pixelate';
    size: ControlParam;
} | {
    name: 'edge-detect';
    threshold: ControlParam;
};
/**
 * Composition Node - Combines multiple layers
 */
export interface CompositionNode extends Node {
    type: 'composition';
    composition: CompositionType;
}
export type CompositionType = {
    name: 'blend';
    mode: 'add' | 'multiply' | 'screen' | 'overlay';
    opacity: ControlParam;
} | {
    name: 'mask';
    sourceNode: string;
    maskNode: string;
} | {
    name: 'layer';
    zIndex: ControlParam;
};
export type VisualNode = GeneratorNode | EffectNode | CompositionNode;
/**
 * Visual Timeline - Complete description of visual states
 * Generated by AI orchestrator based on audio features
 */
export interface VisualTimeline {
    duration: number;
    nodes: Node[];
    backgroundColor: ControlParam;
    musicGenre?: string;
    mood?: string;
    energy?: 'low' | 'medium' | 'high';
}
/**
 * Node Renderer Context - State passed to node renderers
 */
export interface NodeRenderContext {
    time: number;
    deltaTime: number;
    frame: number;
    audioFeatures: DeepAudioFeatures;
    audioFrame: number;
    gl: any;
    inputBuffer: any;
    outputBuffer: any;
    width: number;
    height: number;
}
/**
 * Evaluate a control parameter at current time/audio state
 */
export declare function evaluateParam(param: ControlParam, time: number, duration: number, audioFeatures: DeepAudioFeatures, audioFrame: number): number;
/**
 * Calculate node opacity based on fade in/out
 */
export declare function calculateNodeOpacity(node: Node, time: number): number;
//# sourceMappingURL=types.d.ts.map
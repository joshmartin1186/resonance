#!/usr/bin/env node
"use strict";var ju=Object.defineProperty;var D=(e,t)=>ju(e,"name",{value:t,configurable:!0});var Q=require("fs/promises"),xu=require("tty"),H=require("path"),Ru=require("module"),Ee=require("node:path"),Dt=require("node:fs/promises"),ct=require("fs"),Tu=require("events"),Ne=typeof document<"u"?document.currentScript:null,Lu=Object.defineProperty,X=D((e,t)=>Lu(e,"name",{value:t,configurable:!0}),"a");const Pu="known-flag",Mu="unknown-flag",Nu="argument",_u=/\B([A-Z])/g,Iu=X(e=>e.replaceAll(_u,"-$1").toLowerCase(),"camelToKebab"),{hasOwnProperty:Wu}=Object.prototype,Ce=X((e,t)=>Wu.call(e,t),"hasOwn"),_e=X(e=>typeof e=="function"?[e,!1]:Array.isArray(e)?[e[0],!0]:_e(e.type),"parseFlagType"),lt=X((e,t)=>e===Boolean?t!=="false":t,"normalizeBoolean"),ht=X((e,t)=>typeof t=="boolean"?t:e===Number&&t===""?Number.NaN:e(t),"applyParser"),qu=/[\s.:=]/,Gu=X(e=>{const t=`Flag name "${e}"`;if(e.length===0)throw new Error(`${t} cannot be empty`);if(e.length===1)throw new Error(`${t} must be longer than a character`);const u=e.match(qu);if(u)throw new Error(`${t} cannot contain "${u?.[0]}"`)},"validateFlagName"),Ie=X((e,t,u)=>{if(Ce(e,t))throw new Error(`Duplicate flags named "${t}"`);e[t]=u},"setFlag"),Vu=X(e=>{const t={};for(const u in e){if(!Ce(e,u))continue;Gu(u);const n=e[u],s=[[],..._e(n),n];Ie(t,u,s);const i=Iu(u);if(u!==i&&Ie(t,i,s),"alias"in n&&typeof n.alias=="string"){const{alias:o}=n,a=`Flag alias "${o}" for flag "${u}"`;if(o.length===0)throw new Error(`${a} cannot be empty`);if(o.length>1)throw new Error(`${a} must be a single character`);Ie(t,o,s)}}return t},"createRegistry"),zu=X((e,t)=>{const u={};for(const n in e){if(!Ce(e,n))continue;const[s,,i,o]=t[n];if(s.length===0&&"default"in o){let{default:a}=o;typeof a=="function"&&(a=a()),u[n]=a}else u[n]=i?s:s.pop()}return u},"finalizeFlags"),je="--",Ju=3,Uu=/^-{1,2}\w/,pt=X(e=>{if(!Uu.test(e))return;const t=!e.startsWith(je);let u=e.slice(t?1:2),n,s=-1;for(const i of["=",":","."]){const o=u.indexOf(i);o!==-1&&(s===-1||o<s)&&(s=o)}return s!==-1&&(n=u.slice(s+1),u=u.slice(0,s)),[u,n,t]},"parseFlagArgv"),ft=X((e,{onFlag:t,onArgument:u})=>{let n;const s=X((i,o)=>{if(typeof n!="function")return!0;n(i,o),n=void 0},"triggerValueCallback");for(let i=0;i<e.length;i+=1){const o=e[i];if(o===je){s();const l=e.slice(i+1);u?.(l,[i],!0);break}const a=pt(o);if(a){if(s(),!t)continue;const[l,c,f]=a;if(f)for(let g=0;g<l.length;g+=1){s();const d=g===l.length-1;n=t(l[g],d?c:void 0,[i,g+1,d])}else n=t(l,c,[i])}else s(o,[i])&&u?.([o],[i])}s()},"argvIterator"),Ft=X((e,t)=>{for(let u=t.length-1;u>=0;u-=1){const[n,s,i]=t[u];if(s){const o=e[n];let a=o.slice(0,s);if(i||(a+=o.slice(s+1)),a!=="-"){e[n]=a;continue}}e.splice(n,1)}},"spliceFromArgv"),Hu=X((e,t=process.argv.slice(2),{ignore:u}={})=>{const n=[],s=Vu(e),i={},o=[];return o[je]=[],ft(t,{onFlag(a,l,c){const f=(c.length===Ju||a.length>1)&&Ce(s,a);if(!u?.(f?Pu:Mu,a,l)){if(f){const[g,d]=s[a],m=lt(d,l),C=X((p,w)=>{n.push(c),w&&n.push(w),g.push(ht(d,p||""))},"getFollowingValue");return m===void 0?C:C(m)}Ce(i,a)||(i[a]=[]),i[a].push(l===void 0?!0:l),n.push(c)}},onArgument:X((a,l,c)=>{u?.(Nu,t[l[0]])||(o.push(...a),c?(o[je]=a,t.splice(l[0])):n.push(l))},"onArgument")}),Ft(t,n),{flags:zu(e,s),unknownFlags:i,_:o}},"typeFlag");X((e,t,u=process.argv.slice(2))=>{const n=new Set(e.split(",").map(l=>pt(l)?.[0])),[s,i]=_e(t),o=[],a=[];return ft(u,{onFlag:X((l,c,f)=>{if(!n.has(l)||!i&&o.length>0)return;const g=lt(s,c),d=X((m,C)=>{a.push(f),C&&a.push(C),o.push(ht(s,m||""))},"getFollowingValue");return g===void 0?d:d(g)},"onFlag")}),Ft(u,a),i?o:o[0]},"getFlag");var Yu=Object.defineProperty,N=D((e,t)=>Yu(e,"name",{value:t,configurable:!0}),"n");const Zu=N(e=>{const t=process.stdout.columns??Number.POSITIVE_INFINITY;return typeof e=="function"&&(e=e(t)),e||(e={}),Array.isArray(e)?{columns:e,stdoutColumns:t}:{columns:e.columns??[],stdoutColumns:e.stdoutColumns??t}},"getOptions");function dt({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}D(dt,"j"),N(dt,"ansiRegex");const Ku=dt();function We(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Ku,"")}D(We,"w"),N(We,"stripAnsi");function gt(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}D(gt,"P$1"),N(gt,"isAmbiguous");function mt(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}D(mt,"z$1"),N(mt,"isFullWidth");function Et(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9776&&e<=9783||e>=9800&&e<=9811||e===9855||e>=9866&&e<=9871||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12773||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e===94192||e===94193||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101631&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e>=119552&&e<=119638||e>=119648&&e<=119670||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129673||e>=129679&&e<=129734||e>=129742&&e<=129756||e>=129759&&e<=129769||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}D(Et,"G$1"),N(Et,"isWide");function Ct(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}D(Ct,"Z$1"),N(Ct,"validate");function wt(e,{ambiguousAsWide:t=!1}={}){return Ct(e),mt(e)||Et(e)||t&&gt(e)?2:1}D(wt,"V$1"),N(wt,"eastAsianWidth");var Xu=N(()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g,"emojiRegex");const Qu=new Intl.Segmenter,en=new RegExp("^\\p{Default_Ignorable_Code_Point}$","u");function he(e,t={}){if(typeof e!="string"||e.length===0)return 0;const{ambiguousIsNarrow:u=!0,countAnsiEscapeCodes:n=!1}=t;if(n||(e=We(e)),e.length===0)return 0;let s=0;const i={ambiguousAsWide:!u};for(const{segment:o}of Qu.segment(e)){const a=o.codePointAt(0);if(!(a<=31||a>=127&&a<=159)&&!(a>=8203&&a<=8207||a===65279)&&!(a>=768&&a<=879||a>=6832&&a<=6911||a>=7616&&a<=7679||a>=8400&&a<=8447||a>=65056&&a<=65071)&&!(a>=55296&&a<=57343)&&!(a>=65024&&a<=65039)&&!en.test(o)){if(Xu().test(o)){s+=2;continue}s+=wt(a,i)}}return s}D(he,"d"),N(he,"stringWidth");const Bt=N(e=>Math.max(...e.split(`
`).map(t=>he(t))),"getLongestLineWidth"),tn=N(e=>{const t=[];for(const u of e){const{length:n}=u,s=n-t.length;for(let i=0;i<s;i+=1)t.push(0);for(let i=0;i<n;i+=1){const o=Bt(u[i]);o>t[i]&&(t[i]=o)}}return t},"getColumnContentWidths"),yt=/^\d+%$/,bt={width:"auto",align:"left",contentWidth:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,horizontalPadding:0,paddingLeftString:"",paddingRightString:""},un=N((e,t)=>{const u=[];for(let n=0;n<e.length;n+=1){const s=t[n]??"auto";if(typeof s=="number"||s==="auto"||s==="content-width"||typeof s=="string"&&yt.test(s)){u.push({...bt,width:s,contentWidth:e[n]});continue}if(s&&typeof s=="object"){const i={...bt,...s,contentWidth:e[n]};i.horizontalPadding=i.paddingLeft+i.paddingRight,u.push(i);continue}throw new Error(`Invalid column width: ${JSON.stringify(s)}`)}return u},"initColumns"),nn=N((e,t)=>{for(const u of e){const{width:n}=u;if(n==="content-width"&&(u.width=u.contentWidth),n==="auto"){const l=Math.min(20,u.contentWidth);u.width=l,u.autoOverflow=u.contentWidth-l}if(typeof n=="string"&&yt.test(n)){const l=Number.parseFloat(n.slice(0,-1))/100;u.width=Math.floor(t*l)-(u.paddingLeft+u.paddingRight)}const{horizontalPadding:s}=u,i=1,o=i+s;if(o>=t){const l=o-t,c=Math.ceil(u.paddingLeft/s*l),f=l-c;u.paddingLeft-=c,u.paddingRight-=f,u.horizontalPadding=u.paddingLeft+u.paddingRight}u.paddingLeftString=u.paddingLeft?" ".repeat(u.paddingLeft):"",u.paddingRightString=u.paddingRight?" ".repeat(u.paddingRight):"";const a=t-u.horizontalPadding;u.width=Math.max(Math.min(u.width,a),i)}},"resolveColumnWidths"),At=N(()=>Object.assign([],{columns:0}),"makeRow"),sn=N((e,t)=>{const u=[At()];let[n]=u;for(const s of e){const i=s.width+s.horizontalPadding;n.columns+i>t&&(n=At(),u.push(n)),n.push(s),n.columns+=i}for(const s of u){const i=s.reduce((d,m)=>d+m.width+m.horizontalPadding,0);let o=t-i;if(o===0)continue;const a=s.filter(d=>"autoOverflow"in d),l=a.filter(d=>d.autoOverflow>0),c=l.reduce((d,m)=>d+m.autoOverflow,0),f=Math.min(c,o);for(const d of l){const m=Math.floor(d.autoOverflow/c*f);d.width+=m,o-=m}const g=Math.floor(o/a.length);for(let d=0;d<a.length;d+=1){const m=a[d];d===a.length-1?m.width+=o:m.width+=g,o-=g}}return u},"balanceAuto"),rn=N((e,t,u)=>{const n=un(u,t);return nn(n,e),sn(n,e)},"computeColumnWidths"),qe=10,vt=N((e=0)=>t=>`\x1B[${t+e}m`,"wrapAnsi16"),$t=N((e=0)=>t=>`\x1B[${38+e};5;${t}m`,"wrapAnsi256"),St=N((e=0)=>(t,u,n)=>`\x1B[${38+e};2;${t};${u};${n}m`,"wrapAnsi16m"),G={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(G.modifier);const on=Object.keys(G.color),an=Object.keys(G.bgColor);[...on,...an];function kt(){const e=new Map;for(const[t,u]of Object.entries(G)){for(const[n,s]of Object.entries(u))G[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},u[n]=G[n],e.set(s[0],s[1]);Object.defineProperty(G,t,{value:u,enumerable:!1})}return Object.defineProperty(G,"codes",{value:e,enumerable:!1}),G.color.close="\x1B[39m",G.bgColor.close="\x1B[49m",G.color.ansi=vt(),G.color.ansi256=$t(),G.color.ansi16m=St(),G.bgColor.ansi=vt(qe),G.bgColor.ansi256=$t(qe),G.bgColor.ansi16m=St(qe),Object.defineProperties(G,{rgbToAnsi256:{value:N((t,u,n)=>t===u&&u===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(u/255*5)+Math.round(n/255*5),"value"),enumerable:!1},hexToRgb:{value:N(t=>{const u=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!u)return[0,0,0];let[n]=u;n.length===3&&(n=[...n].map(i=>i+i).join(""));const s=Number.parseInt(n,16);return[s>>16&255,s>>8&255,s&255]},"value"),enumerable:!1},hexToAnsi256:{value:N(t=>G.rgbToAnsi256(...G.hexToRgb(t)),"value"),enumerable:!1},ansi256ToAnsi:{value:N(t=>{if(t<8)return 30+t;if(t<16)return 90+(t-8);let u,n,s;if(t>=232)u=((t-232)*10+8)/255,n=u,s=u;else{t-=16;const a=t%36;u=Math.floor(t/36)/5,n=Math.floor(a/6)/5,s=a%6/5}const i=Math.max(u,n,s)*2;if(i===0)return 30;let o=30+(Math.round(s)<<2|Math.round(n)<<1|Math.round(u));return i===2&&(o+=60),o},"value"),enumerable:!1},rgbToAnsi:{value:N((t,u,n)=>G.ansi256ToAnsi(G.rgbToAnsi256(t,u,n)),"value"),enumerable:!1},hexToAnsi:{value:N(t=>G.ansi256ToAnsi(G.hexToAnsi256(t)),"value"),enumerable:!1}}),G}D(kt,"FD"),N(kt,"assembleStyles");const Dn=kt(),xe=new Set(["\x1B","\x9B"]),cn=39,Ge="\x07",Ot="[",ln="]",jt="m",Re=`${ln}8;;`,xt=N(e=>`${xe.values().next().value}${Ot}${e}${jt}`,"wrapAnsiCode"),Rt=N(e=>`${xe.values().next().value}${Re}${e}${Ge}`,"wrapAnsiHyperlink"),hn=N(e=>e.split(" ").map(t=>he(t)),"wordLengths"),Ve=N((e,t,u)=>{const n=[...t];let s=!1,i=!1,o=he(We(e.at(-1)));for(const[a,l]of n.entries()){const c=he(l);if(o+c<=u?e[e.length-1]+=l:(e.push(l),o=0),xe.has(l)&&(s=!0,i=n.slice(a+1,a+1+Re.length).join("")===Re),s){i?l===Ge&&(s=!1,i=!1):l===jt&&(s=!1);continue}o+=c,o===u&&a<n.length-1&&(e.push(""),o=0)}!o&&e.at(-1).length>0&&e.length>1&&(e[e.length-2]+=e.pop())},"wrapWord"),pn=N(e=>{const t=e.split(" ");let u=t.length;for(;u>0&&!(he(t[u-1])>0);)u--;return u===t.length?e:t.slice(0,u).join(" ")+t.slice(u).join("")},"stringVisibleTrimSpacesRight"),fn=N((e,t,u={})=>{if(u.trim!==!1&&e.trim()==="")return"";let n="",s,i;const o=hn(e);let a=[""];for(const[g,d]of e.split(" ").entries()){u.trim!==!1&&(a[a.length-1]=a.at(-1).trimStart());let m=he(a.at(-1));if(g!==0&&(m>=t&&(u.wordWrap===!1||u.trim===!1)&&(a.push(""),m=0),(m>0||u.trim===!1)&&(a[a.length-1]+=" ",m++)),u.hard&&o[g]>t){const C=t-m,p=1+Math.floor((o[g]-C-1)/t);Math.floor((o[g]-1)/t)<p&&a.push(""),Ve(a,d,t);continue}if(m+o[g]>t&&m>0&&o[g]>0){if(u.wordWrap===!1&&m<t){Ve(a,d,t);continue}a.push("")}if(m+o[g]>t&&u.wordWrap===!1){Ve(a,d,t);continue}a[a.length-1]+=d}u.trim!==!1&&(a=a.map(g=>pn(g)));const l=a.join(`
`),c=[...l];let f=0;for(const[g,d]of c.entries()){if(n+=d,xe.has(d)){const{groups:C}=new RegExp(`(?:\\${Ot}(?<code>\\d+)m|\\${Re}(?<uri>.*)${Ge})`).exec(l.slice(f))||{groups:{}};if(C.code!==void 0){const p=Number.parseFloat(C.code);s=p===cn?void 0:p}else C.uri!==void 0&&(i=C.uri.length===0?void 0:C.uri)}const m=Dn.codes.get(Number(s));c[g+1]===`
`?(i&&(n+=Rt("")),s&&m&&(n+=xt(m))):d===`
`&&(s&&m&&(n+=xt(s)),i&&(n+=Rt(i))),f+=d.length}return n},"exec");function Tt(e,t,u){return String(e).normalize().replaceAll(`\r
`,`
`).split(`
`).map(n=>fn(n,t,u)).join(`
`)}D(Tt,"BD"),N(Tt,"wrapAnsi");const Lt=N(e=>Array.from({length:e}).fill(""),"emptyLines"),Fn=N((e,t)=>{const u=[];let n=0;for(const s of e){let i=0;const o=s.map(l=>{let c=t[n]??"";n+=1,l.preprocess&&(c=l.preprocess(c)),Bt(c)>l.width&&(c=Tt(c,l.width,{hard:!0}));let f=c.split(`
`);if(l.postprocess){const{postprocess:g}=l;f=f.map((d,m)=>g.call(l,d,m))}return l.paddingTop&&f.unshift(...Lt(l.paddingTop)),l.paddingBottom&&f.push(...Lt(l.paddingBottom)),f.length>i&&(i=f.length),{...l,lines:f}}),a=[];for(let l=0;l<i;l+=1){const c=o.map(f=>{const g=f.lines[l]??"",d=Number.isFinite(f.width)?" ".repeat(f.width-he(g)):"";let m=f.paddingLeftString;return f.align==="right"&&(m+=d),m+=g,f.align==="left"&&(m+=d),m+f.paddingRightString}).join("");a.push(c)}u.push(a.join(`
`))}return u.join(`
`)},"renderRow"),dn=N((e,t)=>{if(!e||e.length===0)return"";const u=tn(e),n=u.length;if(n===0)return"";const{stdoutColumns:s,columns:i}=Zu(t);if(i.length>n)throw new Error(`${i.length} columns defined, but only ${n} columns found`);const o=rn(s,i,u);return e.map(a=>Fn(o,a)).join(`
`)},"terminalColumns"),gn=["<",">","=",">=","<="],mn=N(e=>{if(!gn.includes(e))throw new TypeError(`Invalid breakpoint operator: ${e}`)},"assertOperator"),En=N(e=>{const t=Object.keys(e).map(u=>{const[n,s]=u.split(" ");mn(n);const i=Number.parseInt(s,10);if(Number.isNaN(i))throw new TypeError(`Invalid breakpoint value: ${s}`);const o=e[u];return{operator:n,breakpoint:i,value:o}}).sort((u,n)=>n.breakpoint-u.breakpoint);return u=>t.find(({operator:n,breakpoint:s})=>n==="="&&u===s||n===">"&&u>s||n==="<"&&u<s||n===">="&&u>=s||n==="<="&&u<=s)?.value},"breakpoints");var Cn=Object.defineProperty,_=D((e,t)=>Cn(e,"name",{value:t,configurable:!0}),"o");const ae=new Uint32Array(65536),wn=_((e,t)=>{const u=e.length,n=t.length,s=1<<u-1;let i=-1,o=0,a=u,l=u;for(;l--;)ae[e.charCodeAt(l)]|=1<<l;for(l=0;l<n;l++){let c=ae[t.charCodeAt(l)];const f=c|o;c|=(c&i)+i^i,o|=~(c|i),i&=c,o&s&&a++,i&s&&a--,o=o<<1|1,i=i<<1|~(f|o),o&=f}for(l=u;l--;)ae[e.charCodeAt(l)]=0;return a},"myers_32"),Bn=_((e,t)=>{const u=t.length,n=e.length,s=[],i=[],o=Math.ceil(u/32),a=Math.ceil(n/32);for(let C=0;C<o;C++)i[C]=-1,s[C]=0;let l=0;for(;l<a-1;l++){let C=0,p=-1;const w=l*32,S=Math.min(32,n)+w;for(let $=w;$<S;$++)ae[e.charCodeAt($)]|=1<<$;for(let $=0;$<u;$++){const x=ae[t.charCodeAt($)],v=i[$/32|0]>>>$&1,y=s[$/32|0]>>>$&1,B=x|C,k=((x|y)&p)+p^p|x|y;let R=C|~(k|p),P=p&k;R>>>31^v&&(i[$/32|0]^=1<<$),P>>>31^y&&(s[$/32|0]^=1<<$),R=R<<1|v,P=P<<1|y,p=P|~(B|R),C=R&B}for(let $=w;$<S;$++)ae[e.charCodeAt($)]=0}let c=0,f=-1;const g=l*32,d=Math.min(32,n-g)+g;for(let C=g;C<d;C++)ae[e.charCodeAt(C)]|=1<<C;let m=n;for(let C=0;C<u;C++){const p=ae[t.charCodeAt(C)],w=i[C/32|0]>>>C&1,S=s[C/32|0]>>>C&1,$=p|c,x=((p|S)&f)+f^f|p|S;let v=c|~(x|f),y=f&x;m+=v>>>n-1&1,m-=y>>>n-1&1,v>>>31^w&&(i[C/32|0]^=1<<C),y>>>31^S&&(s[C/32|0]^=1<<C),v=v<<1|w,y=y<<1|S,f=y|~($|v),c=v&$}for(let C=g;C<d;C++)ae[e.charCodeAt(C)]=0;return m},"myers_x"),Pt=_((e,t)=>{if(e.length<t.length){const u=t;t=e,e=u}return t.length===0?e.length:e.length<=32?wn(e,t):Bn(e,t)},"distance"),yn=_((e,t)=>{let u=1/0,n=0;for(let s=0;s<t.length;s++){const i=Pt(e,t[s]);i<u&&(u=i,n=s)}return t[n]},"closest"),bn=_(e=>e.replaceAll(/[\W_]([a-z\d])?/gi,(t,u)=>u?u.toUpperCase():""),"camelCase"),An=_(e=>e.replaceAll(/\B([A-Z])/g,"-$1").toLowerCase(),"kebabCase"),vn={"> 80":[{width:"content-width",paddingLeft:2,paddingRight:8},{width:"auto"}],"> 40":[{width:"auto",paddingLeft:2,paddingRight:8,preprocess:_(e=>e.trim(),"preprocess")},{width:"100%",paddingLeft:2,paddingBottom:1}],"> 0":{stdoutColumns:1e3,columns:[{width:"content-width",paddingLeft:2,paddingRight:8},{width:"content-width"}]}};function Mt(e){let t=!1;return{type:"table",data:{tableData:Object.keys(e).sort((u,n)=>u.localeCompare(n)).map(u=>{const n=e[u],s="alias"in n;return s&&(t=!0),{name:u,flag:n,flagFormatted:`--${An(u)}`,aliasesEnabled:t,aliasFormatted:s?`-${n.alias}`:void 0}}).map(u=>(u.aliasesEnabled=t,[{type:"flagName",data:u},{type:"flagDescription",data:u}])),tableBreakpoints:vn}}}D(Mt,"z"),_(Mt,"renderFlags");const Nt=_(e=>!e||(e.version??(e.help?e.help.version:void 0)),"getVersion"),_t=_(e=>{const t="parent"in e&&e.parent?.name;return(t?`${t} `:"")+e.name},"getName");function It(e){const t=[];e.name&&t.push(_t(e));const u=Nt(e)??("parent"in e&&Nt(e.parent));if(u&&t.push(`v${u}`),t.length!==0)return{id:"name",type:"text",data:`${t.join(" ")}
`}}D(It,"K"),_(It,"getNameAndVersion");function Wt(e){const{help:t}=e;if(!(!t||!t.description))return{id:"description",type:"text",data:`${t.description}
`}}D(Wt,"Z"),_(Wt,"getDescription");function qt(e){const t=e.help||{};if("usage"in t)return t.usage?{id:"usage",type:"section",data:{title:"Usage:",body:Array.isArray(t.usage)?t.usage.join(`
`):t.usage}}:void 0;if(e.name){const u=[],n=[_t(e)];if(e.flags&&Object.keys(e.flags).length>0&&n.push("[flags...]"),e.parameters&&e.parameters.length>0){const{parameters:s}=e,i=s.indexOf("--"),o=i!==-1&&s.slice(i+1).some(a=>a.startsWith("<"));n.push(s.map(a=>a!=="--"?a:o?"--":"[--]").join(" "))}if(n.length>1&&u.push(n.join(" ")),"commands"in e&&e.commands?.length&&u.push(`${e.name} <command>`),u.length>0)return{id:"usage",type:"section",data:{title:"Usage:",body:u.join(`
`)}}}}D(qt,"G"),_(qt,"getUsage");function Gt(e){return!("commands"in e)||!e.commands?.length?void 0:{id:"commands",type:"section",data:{title:"Commands:",body:{type:"table",data:{tableData:e.commands.map(t=>{const{help:u}=t.options;return[t.options.name,typeof u=="object"&&u.description||""]}),tableOptions:[{width:"content-width",paddingLeft:2,paddingRight:8}]}},indentBody:0}}}D(Gt,"Q"),_(Gt,"getCommands");function Vt(e){if(!(!e.flags||Object.keys(e.flags).length===0))return{id:"flags",type:"section",data:{title:"Flags:",body:Mt(e.flags),indentBody:0}}}D(Vt,"X"),_(Vt,"getFlags");function zt(e){const{help:t}=e;if(!t||!t.examples||t.examples.length===0)return;let{examples:u}=t;if(Array.isArray(u)&&(u=u.join(`
`)),u)return{id:"examples",type:"section",data:{title:"Examples:",body:u}}}D(zt,"Y"),_(zt,"getExamples");function Jt(e){if(!("alias"in e)||!e.alias)return;const{alias:t}=e;return{id:"aliases",type:"section",data:{title:"Aliases:",body:Array.isArray(t)?t.join(", "):t}}}D(Jt,"ee"),_(Jt,"getAliases");const $n=_(e=>[It,Wt,qt,Gt,Vt,zt,Jt].map(t=>t(e)).filter(Boolean),"generateHelp"),Sn=xu.WriteStream.prototype.hasColors();class kn{static{D(this,"ne")}static{_(this,"Renderers")}text(t){return t}bold(t){return Sn?`\x1B[1m${t}\x1B[22m`:t.toLocaleUpperCase()}indentText({text:t,spaces:u}){return t.replaceAll(/^/gm," ".repeat(u))}heading(t){return this.bold(t)}section({title:t,body:u,indentBody:n=2}){return`${(t?`${this.heading(t)}
`:"")+(u?this.indentText({text:this.render(u),spaces:n}):"")}
`}table({tableData:t,tableOptions:u,tableBreakpoints:n}){return dn(t.map(s=>s.map(i=>this.render(i))),n?En(n):u)}flagParameter(t){return t===Boolean?"":t===String?"<string>":t===Number?"<number>":Array.isArray(t)?this.flagParameter(t[0]):"<value>"}flagOperator(t){return" "}flagName(t){const{flag:u,flagFormatted:n,aliasesEnabled:s,aliasFormatted:i}=t;let o="";if(i?o+=`${i}, `:s&&(o+="    "),o+=n,"placeholder"in u&&typeof u.placeholder=="string")o+=`${this.flagOperator(t)}${u.placeholder}`;else{const a=this.flagParameter("type"in u?u.type:u);a&&(o+=`${this.flagOperator(t)}${a}`)}return o}flagDefault(t){return JSON.stringify(t)}flagDescription({flag:t}){let u="description"in t?t.description??"":"";if("default"in t){let{default:n}=t;typeof n=="function"&&(n=n()),n&&(u+=` (default: ${this.flagDefault(n)})`)}return u}render(t){if(typeof t=="string")return t;if(Array.isArray(t))return t.map(u=>this.render(u)).join(`
`);if("type"in t&&this[t.type]){const u=this[t.type];if(typeof u=="function")return u.call(this,t.data)}throw new Error(`Invalid node type: ${JSON.stringify(t)}`)}}const ze=_(e=>e.length>0&&!e.includes(" "),"isValidScriptName"),{stringify:ie}=JSON,On=/[|\\{}()[\]^$+*?.]/;function Je(e){const t=[];let u,n;for(const s of e){if(n)throw new Error(`Invalid parameter: Spread parameter ${ie(n)} must be last`);const i=s[0],o=s.at(-1);let a;if(i==="<"&&o===">"&&(a=!0,u))throw new Error(`Invalid parameter: Required parameter ${ie(s)} cannot come after optional parameter ${ie(u)}`);if(i==="["&&o==="]"&&(a=!1,u=s),a===void 0)throw new Error(`Invalid parameter: ${ie(s)}. Must be wrapped in <> (required parameter) or [] (optional parameter)`);let l=s.slice(1,-1);const c=l.slice(-3)==="...";c&&(n=s,l=l.slice(0,-3));const f=l.match(On);if(f)throw new Error(`Invalid parameter: ${ie(s)}. Invalid character found ${ie(f[0])}`);t.push({name:l,required:a,spread:c})}return t}D(Je,"P"),_(Je,"parseParameters");function Ue(e,t,u,n){for(let s=0;s<t.length;s+=1){const{name:i,required:o,spread:a}=t[s],l=bn(i);if(l in e)throw new Error(`Invalid parameter: ${ie(i)} is used more than once.`);const c=a?u.slice(s):u[s];if(a&&(s=t.length),o&&(!c||a&&c.length===0))return console.error(`Error: Missing required parameter ${ie(i)}
`),n(),process.exit(1);e[l]=c}}D(Ue,"S"),_(Ue,"mapParametersToArguments");function Ut(e){return e!==!1}D(Ut,"se"),_(Ut,"helpEnabled");const jn=_(e=>{const t=[];for(const[u,n]of Object.entries(e))if(t.push(u),n&&typeof n=="object"&&"alias"in n){const{alias:s}=n;typeof s=="string"&&s?t.push(s):Array.isArray(s)&&t.push(...s.filter(Boolean))}return t},"getKnownFlagNames"),xn=_((e,t)=>{if(e.length<3||t.length===0)return;const u=yn(e,t);return Pt(e,u)<=2?u:void 0},"findClosestFlag"),Rn=_((e,t)=>{const u=Object.keys(e);if(u.length!==0){for(const n of u){const s=xn(n,t),i=s?` (Did you mean --${s}?)`:"";console.error(`Error: Unknown flag: --${n}.${i}`)}process.exit(1)}},"handleUnknownFlags");function He(e,t,u,n){const s={...t.flags},i=t.version&&!("version"in s);i&&(s.version={type:Boolean,description:"Show version"});const{help:o}=t,a=Ut(o);a&&!("help"in s)&&(s.help={type:Boolean,alias:"h",description:"Show help"});const l=Hu(s,n,{ignore:t.ignoreArgv}),c=_(()=>{console.log(t.version)},"showVersion");if(i&&l.flags.version===!0)return c(),process.exit(0);const f=new kn,g=a&&o?.render?o.render:p=>f.render(p),d=_(p=>{const w=$n({...t,...p?{help:p}:{},flags:s});console.log(g(w,f))},"showHelp");if(a&&l.flags.help===!0)return d(),process.exit(0);if((t.strictFlags??t.parent?.strictFlags)&&Rn(l.unknownFlags,jn(s)),t.parameters){let{parameters:p}=t,w=l._;const S=p.indexOf("--"),$=p.slice(S+1),x=Object.create(null);let v=[];S>-1&&$.length>0&&(p=p.slice(0,S),v=l._["--"],w=w.slice(0,-v.length||void 0)),Ue(x,Je(p),w,d),S>-1&&$.length>0&&Ue(x,Je($),v,d),Object.assign(l._,x)}const m={...l,showVersion:c,showHelp:d},C={command:e,...m};if(typeof u=="function"){const p=u(m);if(p&&"then"in p)return Object.assign(Promise.resolve(p),C)}return C}D(He,"I"),_(He,"cliBase");function Ht(e,t){const u=new Map;for(const n of t){const s=[n.options.name],{alias:i}=n.options;i&&(Array.isArray(i)?s.push(...i):s.push(i));for(const o of s){if(u.has(o))throw new Error(`Duplicate command name found: ${ie(o)}`);u.set(o,n)}}return u.get(e)}D(Ht,"ce"),_(Ht,"getCommand");function Yt(e,t,u=process.argv.slice(2)){if(!e)throw new Error("Options is required");if("name"in e&&(!e.name||!ze(e.name)))throw new Error(`Invalid script name: ${ie(e.name)}`);const n=u[0];if(e.commands&&n&&ze(n)){const s=Ht(n,e.commands);if(s)return He(s.options.name,{...s.options,parent:e},s.callback,u.slice(1))}return He(void 0,e,t,u)}D(Yt,"fe"),_(Yt,"cli");function Zt(e,t){if(!e)throw new Error("Command options are required");const{name:u}=e;if(u===void 0)throw new Error("Command name is required");if(!ze(u))throw new Error(`Invalid command name ${JSON.stringify(u)}. Command names must be one word.`);return{options:e,callback:t}}D(Zt,"de"),_(Zt,"command");function Kt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}D(Kt,"getDefaultExportFromCjs");function Te(){}D(Te,"noop");function Xt(){return typeof WeakMap<"u"?new WeakMap:Tn()}D(Xt,"createWeakMap");function Tn(){return{add:Te,delete:Te,get:Te,set:Te,has:D(function(e){return!1},"has")}}D(Tn,"fakeSetOrMap");var Ln=Object.prototype.hasOwnProperty,Ye=D(function(e,t){return Ln.call(e,t)},"has");function Ze(e,t){for(var u in t)Ye(t,u)&&(e[u]=t[u]);return e}D(Ze,"extend");var Pn=/^[ \t]*(?:\r\n|\r|\n)/,Mn=/(?:\r\n|\r|\n)[ \t]*$/,Nn=/^(?:[\r\n]|$)/,_n=/(?:\r\n|\r|\n)([ \t]*)(?:[^ \t\r\n]|$)/,In=/^[ \t]*[\r\n][ \t\r\n]*$/;function Qt(e,t,u){var n=0,s=e[0].match(_n);s&&(n=s[1].length);var i="(\\r\\n|\\r|\\n).{0,"+n+"}",o=new RegExp(i,"g");t&&(e=e.slice(1));var a=u.newline,l=u.trimLeadingNewline,c=u.trimTrailingNewline,f=typeof a=="string",g=e.length,d=e.map(function(m,C){return m=m.replace(o,"$1"),C===0&&l&&(m=m.replace(Pn,"")),C===g-1&&c&&(m=m.replace(Mn,"")),f&&(m=m.replace(/\r\n|\n|\r/g,function(p){return a})),m});return d}D(Qt,"_outdentArray");function Wn(e,t){for(var u="",n=0,s=e.length;n<s;n++)u+=e[n],n<s-1&&(u+=t[n]);return u}D(Wn,"concatStringsAndValues");function qn(e){return Ye(e,"raw")&&Ye(e,"length")}D(qn,"isTemplateStringsArray");function eu(e){var t=Xt(),u=Xt();function n(i){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];if(qn(i)){var l=i,c=(o[0]===n||o[0]===De)&&In.test(l[0])&&Nn.test(l[1]),f=c?u:t,g=f.get(l);if(g||(g=Qt(l,c,e),f.set(l,g)),o.length===0)return g[0];var d=Wn(g,c?o.slice(1):o);return d}else return eu(Ze(Ze({},e),i||{}))}D(n,"outdent");var s=Ze(n,{string:D(function(i){return Qt([i],!1,e)[0]},"string")});return s}D(eu,"createInstance");var De=eu({trimLeadingNewline:!0,trimTrailingNewline:!0});if(typeof module<"u")try{module.exports=De,Object.defineProperty(De,"__esModule",{value:!0}),De.default=De,De.outdent=De}catch{}let pe=!0;const de=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let we=0;if(de.process&&de.process.env&&de.process.stdout){const{FORCE_COLOR:e,NODE_DISABLE_COLORS:t,NO_COLOR:u,TERM:n,COLORTERM:s}=de.process.env;t||u||e==="0"?pe=!1:e==="1"||e==="2"||e==="3"?pe=!0:n==="dumb"?pe=!1:"CI"in de.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(i=>i in de.process.env)?pe=!0:pe=process.stdout.isTTY,pe&&(process.platform==="win32"||s&&(s==="truecolor"||s==="24bit")?we=3:n&&(n.endsWith("-256color")||n.endsWith("256"))?we=2:we=1)}let tu={enabled:pe,supportLevel:we};function ge(e,t,u=1){const n=`\x1B[${e}m`,s=`\x1B[${t}m`,i=new RegExp(`\\x1b\\[${t}m`,"g");return o=>tu.enabled&&tu.supportLevel>=u?n+(""+o).replace(i,n)+s:""+o}D(ge,"kolorist");const Gn=ge(1,22),Ke=ge(2,22),uu=ge(31,39),nu=ge(32,39),Xe=ge(35,39),Be=ge(36,39),ye=D(e=>Q.access(e).then(()=>!0,()=>!1),"fsExists"),su=D(async e=>{const t=await Q.readFile(e,"utf8");return JSON.parse(t)},"readJsonFile"),Vn="link.config.json",iu="link.config.js",ru=D(async e=>{const t=H.join(e,Vn);if(await ye(t))try{return await su(t)}catch(n){throw new Error(`Failed to parse config JSON ${t}: ${n.message}`)}const u=H.join(e,iu);if(await ye(u))try{return Ru.createRequire(typeof document>"u"?require("url").pathToFileURL(__filename).href:Ne&&Ne.tagName.toUpperCase()==="SCRIPT"&&Ne.src||new URL("cli.js",document.baseURI).href)(u)}catch(n){throw new Error(`Failed to load config file ${iu}: ${n.message}`)}},"loadConfig");var be={},ou;function zn(){if(ou)return be;ou=1,be.replaceDollarWithPercentPair=n,be.convertToSetCommand=e,be.convertToSetCommands=u;function e(s,i){var o="";return s=s||"",s=s.trim(),i=i||"",i=i.trim(),s&&i&&i.length>0&&(o="@SET "+s+"="+n(i)+`\r
`),o}D(e,"convertToSetCommand");function t(s){var i={};return s.map(function(o){var a=o.split("=");i[a[0]]=a[1]}),i}D(t,"extractVariableValuePairs");function u(s){var i=t(s.split(" ")),o="";return Object.keys(i).forEach(function(a){o+=e(a,i[a])}),o}D(u,"convertToSetCommands");function n(s){var i=/\$\{?([^$@#?\- \t{}:]+)\}?/g,o="",a=0;do{var l=i.exec(s);if(l){var c=s.substring(a,l.index)||"";o+=c+"%"+l[1]+"%",a=i.lastIndex}}while(i.lastIndex>0);return o+=s.slice(a),o}return D(n,"replaceDollarWithPercentPair"),be}D(zn,"requireToBatchSyntax");var Qe,au;function Jn(){if(au)return Qe;au=1;const{chmod:e,mkdir:t,readFile:u,stat:n,unlink:s,writeFile:i}=Q,{dirname:o,relative:a}=H,l=zn(),c=/^#!\s*(?:\/usr\/bin\/env\s+(?:-S\s+)?((?:[^ \t=]+=[^ \t=]+\s+)*))?([^ \t]+)(.*)$/,f=D((S,$)=>n(S).then(()=>d(S,$),()=>{}),"cmdShimIfExists"),g=D(S=>s(S).catch(()=>{}),"rm"),d=D((S,$)=>n(S).then(()=>m(S,$)),"cmdShim"),m=D((S,$)=>Promise.all([g($),g($+".cmd"),g($+".ps1")]).then(()=>C(S,$)),"cmdShim_"),C=D((S,$)=>t(o($),{recursive:!0}).then(()=>u(S,"utf8")).then(x=>{const y=x.trim().split(/\r*\n/)[0].match(c);if(!y)return p(S,$);const B=y[1]||"",k=y[2],R=y[3]||"";return p(S,$,k,R,B)},()=>p(S,$)),"writeShim"),p=D((S,$,x,v,y)=>{let B=a(o($),S),k=B.split("/").join("\\"),R,P=x&&x.split("\\").join("/"),O,j=P&&`"${P}$exe"`,T;B=B.split("\\").join("/"),v=v||"",y=y||"",x?(R=`"%dp0%\\${x}.exe"`,O=`"$basedir/${x}"`,T=`"$basedir/${x}$exe"`,k=`"%dp0%\\${k}"`,B=`"$basedir/${B}"`):(x=`"%dp0%\\${k}"`,P=`"$basedir/${B}"`,j=P,v="",k="",B="");const M=`@ECHO off\r
GOTO start\r
:find_dp0\r
SET dp0=%~dp0\r
EXIT /b\r
:start\r
SETLOCAL\r
CALL :find_dp0\r
`;let V;if(R){O=O.trim(),v=v.trim();const ne=l.convertToSetCommands(y);V=M+ne+`\r
IF EXIST ${R} (\r
  SET "_prog=${R.replace(/(^")|("$)/g,"")}"\r
) ELSE (\r
  SET "_prog=${x.replace(/(^")|("$)/g,"")}"\r
  SET PATHEXT=%PATHEXT:;.JS;=;%\r
)\r
\r
endLocal & goto #_undefined_# 2>NUL || title %COMSPEC% & "%_prog%" ${v} ${k} %*\r
`}else V=`${M}${x} ${v} ${k} %*\r
`;let W=`#!/bin/sh
`;W=W+`basedir=$(dirname "$(echo "$0" | sed -e 's,\\\\,/,g')")

case \`uname\` in
    *CYGWIN*|*MINGW*|*MSYS*)
        if command -v cygpath > /dev/null 2>&1; then
            basedir=\`cygpath -w "$basedir"\`
        fi
    ;;
esac

`,O?W=W+`if [ -x ${O} ]; then
  exec ${y}${O} ${v} ${B} "$@"
else 
  exec ${y}${P} ${v} ${B} "$@"
fi
`:W=W+`exec ${P} ${v} ${B} "$@"
`;let z=`#!/usr/bin/env pwsh
$basedir=Split-Path $MyInvocation.MyCommand.Definition -Parent

$exe=""
if ($PSVersionTable.PSVersion -lt "6.0" -or $IsWindows) {
  # Fix case when both the Windows and Linux builds of Node
  # are installed in the same directory
  $exe=".exe"
}
`;return O?z=z+`$ret=0
if (Test-Path ${T}) {
  # Support pipeline input
  if ($MyInvocation.ExpectingInput) {
    $input | & ${T} ${v} ${B} $args
  } else {
    & ${T} ${v} ${B} $args
  }
  $ret=$LASTEXITCODE
} else {
  # Support pipeline input
  if ($MyInvocation.ExpectingInput) {
    $input | & ${j} ${v} ${B} $args
  } else {
    & ${j} ${v} ${B} $args
  }
  $ret=$LASTEXITCODE
}
exit $ret
`:z=z+`# Support pipeline input
if ($MyInvocation.ExpectingInput) {
  $input | & ${j} ${v} ${B} $args
} else {
  & ${j} ${v} ${B} $args
}
exit $LASTEXITCODE
`,Promise.all([i($+".ps1",z,"utf8"),i($+".cmd",V,"utf8"),i($,W,"utf8")]).then(()=>w($))},"writeShim_"),w=D(S=>Promise.all([e(S,493),e(S+".cmd",493),e(S+".ps1",493)]),"chmodShim");return Qe=d,d.ifExists=f,Qe}D(Jn,"requireLib$3");var Un=Jn(),Hn=Kt(Un);const Du=D(async e=>{const t=H.join(e,"package.json");if(!await ye(t))throw new Error(`package.json not found in ${e}`);const n=await su(t);if(!n.name)throw new Error(`package.json must contain a name: ${t}`);return n},"readPackageJson"),cu=D(async(e,t,u)=>{const n=await Q.lstat(t).catch(()=>null);if(n){if(n.isSymbolicLink()){const s=await Q.realpath(t).catch(()=>null);if(s){const i=H.isAbsolute(e)?e:H.resolve(H.dirname(t),e),o=await Q.realpath(i).catch(()=>null);if(o&&(process.platform==="win32"?s.toLowerCase()===o.toLowerCase():s===o))return}}await Q.rm(t,{recursive:!0})}await Q.symlink(e,t,u)},"symlink"),Yn=D(async(e,t)=>{await cu(e,t),await Q.chmod(t,493).catch(u=>{if(u.code==="ENOENT"){console.warn(`Warning: Binary target does not exist: ${e}`),console.warn("When built, ensure it has executable permissions (chmod +x)");return}throw u})},"symlinkBinary"),Zn=D(async(e,t)=>{if(await ye(t)){const[u,n]=await Promise.all([Q.stat(t),Q.stat(e)]);if(u.ino===n.ino)return;await Q.rm(t,{recursive:!0})}await Q.link(e,t)},"hardlink"),Kn=D(async(e,t,{name:u,bin:n},s)=>{if(!n)return[];u?.startsWith("@")&&([,u]=u.split("/"));const i=H.join(t,".bin");if(await Q.mkdir(i,{recursive:!0}),typeof n=="string"){await s(H.resolve(e,n),H.join(i,u));return}await Promise.all(Object.entries(n).map(async([o,a])=>await s(H.resolve(e,a),H.join(i,o))))},"linkBinaries"),Xn="node_modules",Qn=D(async(e,t)=>{try{await Hn(e,t)}catch(u){throw u.code==="ENOENT"?new Error(`Binary target does not exist: ${e}`):u}},"cmdShimWithExplicitError"),es=D(async(e,t)=>{const u=H.resolve(e,t),n=await Du(u),s=H.join(e,Xn),i=H.join(s,n.name),o=H.dirname(i);await Q.mkdir(o,{recursive:!0});const a=H.relative(o,u);return await cu(a,i,"junction"),await Kn(u,s,n,process.platform==="win32"?Qn:Yn),{name:n.name,path:i,target:a}},"symlinkPackage"),lu=D(async(e,t,u)=>{const n=H.resolve(e,t);if(!await ye(n)){console.warn(uu("\u2716"),`Package path does not exist: ${t}`),process.exitCode=1;return}try{const i=await es(e,t);console.log(nu("\u2714"),`Symlinked ${Xe(i.name)}:`,Be(i.path),"\u2192",Be(i.target))}catch(i){console.warn(uu("\u2716"),"Failed to symlink",Be(t),"with error:",i.message),process.exitCode=1;return}if(u.deep){const i=await ru(n);i&&await hu(n,i,u)}},"linkPackage"),hu=D(async(e,t,u)=>{if(!t.packages)return;const n={deep:u.deep??t.deepLink??!1};await Promise.all(t.packages.map(async s=>await lu(e,s,n)))},"linkFromConfig");var et={},Le={},tt={},pu;function ts(){return pu||(pu=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.range=e.balanced=void 0;const t=D((s,i,o)=>{const a=s instanceof RegExp?u(s,o):s,l=i instanceof RegExp?u(i,o):i,c=a!==null&&l!=null&&(0,e.range)(a,l,o);return c&&{start:c[0],end:c[1],pre:o.slice(0,c[0]),body:o.slice(c[0]+a.length,c[1]),post:o.slice(c[1]+l.length)}},"balanced");e.balanced=t;const u=D((s,i)=>{const o=i.match(s);return o?o[0]:null},"maybeMatch"),n=D((s,i,o)=>{let a,l,c,f,g,d=o.indexOf(s),m=o.indexOf(i,d+1),C=d;if(d>=0&&m>0){if(s===i)return[d,m];for(a=[],c=o.length;C>=0&&!g;){if(C===d)a.push(C),d=o.indexOf(s,C+1);else if(a.length===1){const p=a.pop();p!==void 0&&(g=[p,m])}else l=a.pop(),l!==void 0&&l<c&&(c=l,f=m),m=o.indexOf(i,C+1);C=d<m&&d>=0?d:m}a.length&&f!==void 0&&(g=[c,f])}return g},"range");e.range=n})(tt)),tt}D(ts,"requireCommonjs$2");var fu;function us(){if(fu)return Le;fu=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.expand=v;const e=ts(),t="\0SLASH"+Math.random()+"\0",u="\0OPEN"+Math.random()+"\0",n="\0CLOSE"+Math.random()+"\0",s="\0COMMA"+Math.random()+"\0",i="\0PERIOD"+Math.random()+"\0",o=new RegExp(t,"g"),a=new RegExp(u,"g"),l=new RegExp(n,"g"),c=new RegExp(s,"g"),f=new RegExp(i,"g"),g=/\\\\/g,d=/\\{/g,m=/\\}/g,C=/\\,/g,p=/\\./g;function w(O){return isNaN(O)?O.charCodeAt(0):parseInt(O,10)}D(w,"numeric");function S(O){return O.replace(g,t).replace(d,u).replace(m,n).replace(C,s).replace(p,i)}D(S,"escapeBraces");function $(O){return O.replace(o,"\\").replace(a,"{").replace(l,"}").replace(c,",").replace(f,".")}D($,"unescapeBraces");function x(O){if(!O)return[""];const j=[],T=(0,e.balanced)("{","}",O);if(!T)return O.split(",");const{pre:M,body:V,post:W}=T,z=M.split(",");z[z.length-1]+="{"+V+"}";const ne=x(W);return W.length&&(z[z.length-1]+=ne.shift(),z.push.apply(z,ne)),j.push.apply(j,z),j}D(x,"parseCommaParts");function v(O){return O?(O.slice(0,2)==="{}"&&(O="\\{\\}"+O.slice(2)),P(S(O),!0).map($)):[]}D(v,"expand");function y(O){return"{"+O+"}"}D(y,"embrace");function B(O){return/^-?0\d/.test(O)}D(B,"isPadded");function k(O,j){return O<=j}D(k,"lte");function R(O,j){return O>=j}D(R,"gte");function P(O,j){const T=[],M=(0,e.balanced)("{","}",O);if(!M)return[O];const V=M.pre,W=M.post.length?P(M.post,!1):[""];if(/\$$/.test(M.pre))for(let z=0;z<W.length;z++){const ne=V+"{"+M.body+"}"+W[z];T.push(ne)}else{const z=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(M.body),ne=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(M.body),ee=z||ne,Pe=M.body.indexOf(",")>=0;if(!ee&&!Pe)return M.post.match(/,(?!,).*\}/)?(O=M.pre+"{"+M.body+n+M.post,P(O)):[O];let Y;if(ee)Y=M.body.split(/\.\./);else if(Y=x(M.body),Y.length===1&&Y[0]!==void 0&&(Y=P(Y[0],!1).map(y),Y.length===1))return W.map(te=>M.pre+Y[0]+te);let re;if(ee&&Y[0]!==void 0&&Y[1]!==void 0){const te=w(Y[0]),oe=w(Y[1]),fe=Math.max(Y[0].length,Y[1].length);let ce=Y.length===3&&Y[2]!==void 0?Math.abs(w(Y[2])):1,Oe=k;oe<te&&(ce*=-1,Oe=R);const Me=Y.some(B);re=[];for(let b=te;Oe(b,oe);b+=ce){let r;if(ne)r=String.fromCharCode(b),r==="\\"&&(r="");else if(r=String(b),Me){const h=fe-r.length;if(h>0){const F=new Array(h+1).join("0");b<0?r="-"+F+r.slice(1):r=F+r}}re.push(r)}}else{re=[];for(let te=0;te<Y.length;te++)re.push.apply(re,P(Y[te],!1))}for(let te=0;te<re.length;te++)for(let oe=0;oe<W.length;oe++){const fe=V+re[te]+W[oe];(!j||ee||fe)&&T.push(fe)}}return T}return D(P,"expand_"),Le}D(us,"requireCommonjs$1");var Ae={},Fu;function ns(){if(Fu)return Ae;Fu=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.assertValidPattern=void 0;const e=1024*64,t=D(u=>{if(typeof u!="string")throw new TypeError("invalid pattern");if(u.length>e)throw new TypeError("pattern is too long")},"assertValidPattern$1");return Ae.assertValidPattern=t,Ae}D(ns,"requireAssertValidPattern");var ve={},$e={},du;function ss(){if(du)return $e;du=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.parseClass=void 0;const e={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},t=D(i=>i.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),u=D(i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),n=D(i=>i.join(""),"rangesToString"),s=D((i,o)=>{const a=o;if(i.charAt(a)!=="[")throw new Error("not in a brace expression");const l=[],c=[];let f=a+1,g=!1,d=!1,m=!1,C=!1,p=a,w="";e:for(;f<i.length;){const v=i.charAt(f);if((v==="!"||v==="^")&&f===a+1){C=!0,f++;continue}if(v==="]"&&g&&!m){p=f+1;break}if(g=!0,v==="\\"&&!m){m=!0,f++;continue}if(v==="["&&!m){for(const[y,[B,k,R]]of Object.entries(e))if(i.startsWith(y,f)){if(w)return["$.",!1,i.length-a,!0];f+=y.length,R?c.push(B):l.push(B),d=d||k;continue e}}if(m=!1,w){v>w?l.push(t(w)+"-"+t(v)):v===w&&l.push(t(v)),w="",f++;continue}if(i.startsWith("-]",f+1)){l.push(t(v+"-")),f+=2;continue}if(i.startsWith("-",f+1)){w=v,f+=2;continue}l.push(t(v)),f++}if(p<f)return["",!1,0,!1];if(!l.length&&!c.length)return["$.",!1,i.length-a,!0];if(c.length===0&&l.length===1&&/^\\?.$/.test(l[0])&&!C){const v=l[0].length===2?l[0].slice(-1):l[0];return[u(v),!1,p-a,!1]}const S="["+(C?"^":"")+n(l)+"]",$="["+(C?"":"^")+n(c)+"]";return[l.length&&c.length?"("+S+"|"+$+")":l.length?S:$,d,p-a,!0]},"parseClass");return $e.parseClass=s,$e}D(ss,"requireBraceExpressions");var Se={},gu;function ut(){if(gu)return Se;gu=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.unescape=void 0;const e=D((t,{windowsPathsNoEscape:u=!1,magicalBraces:n=!0}={})=>n?u?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"):u?t.replace(/\[([^\/\\{}])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\{}])\]/g,"$1$2").replace(/\\([^\/{}])/g,"$1"),"unescape");return Se.unescape=e,Se}D(ut,"require_unescape");var mu;function Eu(){if(mu)return ve;mu=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.AST=void 0;const e=ss(),t=ut(),u=new Set(["!","?","+","*","@"]),n=D(C=>u.has(C),"isExtglobType"),s="(?!(?:^|/)\\.\\.?(?:$|/))",i="(?!\\.)",o=new Set(["[","."]),a=new Set(["..","."]),l=new Set("().*{}+?[]^$\\!"),c=D(C=>C.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),f="[^/]",g=f+"*?",d=f+"+?";class m{static{D(this,"AST")}type;#u;#n;#i=!1;#e=[];#t;#r;#a;#o=!1;#s;#D;#l=!1;constructor(p,w,S={}){this.type=p,p&&(this.#n=!0),this.#t=w,this.#u=this.#t?this.#t.#u:this,this.#s=this.#u===this?S:this.#u.#s,this.#a=this.#u===this?[]:this.#u.#a,p==="!"&&!this.#u.#o&&this.#a.push(this),this.#r=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#n!==void 0)return this.#n;for(const p of this.#e)if(typeof p!="string"&&(p.type||p.hasMagic))return this.#n=!0;return this.#n}toString(){return this.#D!==void 0?this.#D:this.type?this.#D=this.type+"("+this.#e.map(p=>String(p)).join("|")+")":this.#D=this.#e.map(p=>String(p)).join("")}#p(){if(this!==this.#u)throw new Error("should only call on root");if(this.#o)return this;this.toString(),this.#o=!0;let p;for(;p=this.#a.pop();){if(p.type!=="!")continue;let w=p,S=w.#t;for(;S;){for(let $=w.#r+1;!S.type&&$<S.#e.length;$++)for(const x of p.#e){if(typeof x=="string")throw new Error("string part in extglob AST??");x.copyIn(S.#e[$])}w=S,S=w.#t}}return this}push(...p){for(const w of p)if(w!==""){if(typeof w!="string"&&!(w instanceof m&&w.#t===this))throw new Error("invalid part: "+w);this.#e.push(w)}}toJSON(){const p=this.type===null?this.#e.slice().map(w=>typeof w=="string"?w:w.toJSON()):[this.type,...this.#e.map(w=>w.toJSON())];return this.isStart()&&!this.type&&p.unshift([]),this.isEnd()&&(this===this.#u||this.#u.#o&&this.#t?.type==="!")&&p.push({}),p}isStart(){if(this.#u===this)return!0;if(!this.#t?.isStart())return!1;if(this.#r===0)return!0;const p=this.#t;for(let w=0;w<this.#r;w++){const S=p.#e[w];if(!(S instanceof m&&S.type==="!"))return!1}return!0}isEnd(){if(this.#u===this||this.#t?.type==="!")return!0;if(!this.#t?.isEnd())return!1;if(!this.type)return this.#t?.isEnd();const p=this.#t?this.#t.#e.length:0;return this.#r===p-1}copyIn(p){typeof p=="string"?this.push(p):this.push(p.clone(this))}clone(p){const w=new m(this.type,p);for(const S of this.#e)w.copyIn(S);return w}static#c(p,w,S,$){let x=!1,v=!1,y=-1,B=!1;if(w.type===null){let j=S,T="";for(;j<p.length;){const M=p.charAt(j++);if(x||M==="\\"){x=!x,T+=M;continue}if(v){j===y+1?(M==="^"||M==="!")&&(B=!0):M==="]"&&!(j===y+2&&B)&&(v=!1),T+=M;continue}else if(M==="["){v=!0,y=j,B=!1,T+=M;continue}if(!$.noext&&n(M)&&p.charAt(j)==="("){w.push(T),T="";const V=new m(M,w);j=m.#c(p,V,j,$),w.push(V);continue}T+=M}return w.push(T),j}let k=S+1,R=new m(null,w);const P=[];let O="";for(;k<p.length;){const j=p.charAt(k++);if(x||j==="\\"){x=!x,O+=j;continue}if(v){k===y+1?(j==="^"||j==="!")&&(B=!0):j==="]"&&!(k===y+2&&B)&&(v=!1),O+=j;continue}else if(j==="["){v=!0,y=k,B=!1,O+=j;continue}if(n(j)&&p.charAt(k)==="("){R.push(O),O="";const T=new m(j,R);R.push(T),k=m.#c(p,T,k,$);continue}if(j==="|"){R.push(O),O="",P.push(R),R=new m(null,w);continue}if(j===")")return O===""&&w.#e.length===0&&(w.#l=!0),R.push(O),O="",w.push(...P,R),k;O+=j}return w.type=null,w.#n=void 0,w.#e=[p.substring(S-1)],k}static fromGlob(p,w={}){const S=new m(null,void 0,w);return m.#c(p,S,0,w),S}toMMPattern(){if(this!==this.#u)return this.#u.toMMPattern();const p=this.toString(),[w,S,$,x]=this.toRegExpSource();if(!($||this.#n||this.#s.nocase&&!this.#s.nocaseMagicOnly&&p.toUpperCase()!==p.toLowerCase()))return S;const y=(this.#s.nocase?"i":"")+(x?"u":"");return Object.assign(new RegExp(`^${w}$`,y),{_src:w,_glob:p})}get options(){return this.#s}toRegExpSource(p){const w=p??!!this.#s.dot;if(this.#u===this&&this.#p(),!this.type){const B=this.isStart()&&this.isEnd()&&!this.#e.some(j=>typeof j!="string"),k=this.#e.map(j=>{const[T,M,V,W]=typeof j=="string"?m.#f(j,this.#n,B):j.toRegExpSource(p);return this.#n=this.#n||V,this.#i=this.#i||W,T}).join("");let R="";if(this.isStart()&&typeof this.#e[0]=="string"&&!(this.#e.length===1&&a.has(this.#e[0]))){const T=o,M=w&&T.has(k.charAt(0))||k.startsWith("\\.")&&T.has(k.charAt(2))||k.startsWith("\\.\\.")&&T.has(k.charAt(4)),V=!w&&!p&&T.has(k.charAt(0));R=M?s:V?i:""}let P="";return this.isEnd()&&this.#u.#o&&this.#t?.type==="!"&&(P="(?:$|\\/)"),[R+k+P,(0,t.unescape)(k),this.#n=!!this.#n,this.#i]}const S=this.type==="*"||this.type==="+",$=this.type==="!"?"(?:(?!(?:":"(?:";let x=this.#h(w);if(this.isStart()&&this.isEnd()&&!x&&this.type!=="!"){const B=this.toString();return this.#e=[B],this.type=null,this.#n=void 0,[B,(0,t.unescape)(this.toString()),!1,!1]}let v=!S||p||w||!i?"":this.#h(!0);v===x&&(v=""),v&&(x=`(?:${x})(?:${v})*?`);let y="";if(this.type==="!"&&this.#l)y=(this.isStart()&&!w?i:"")+d;else{const B=this.type==="!"?"))"+(this.isStart()&&!w&&!p?i:"")+g+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&v?")":this.type==="*"&&v?")?":`)${this.type}`;y=$+x+B}return[y,(0,t.unescape)(x),this.#n=!!this.#n,this.#i]}#h(p){return this.#e.map(w=>{if(typeof w=="string")throw new Error("string type in extglob ast??");const[S,$,x,v]=w.toRegExpSource(p);return this.#i=this.#i||v,S}).filter(w=>!(this.isStart()&&this.isEnd())||!!w).join("|")}static#f(p,w,S=!1){let $=!1,x="",v=!1;for(let y=0;y<p.length;y++){const B=p.charAt(y);if($){$=!1,x+=(l.has(B)?"\\":"")+B;continue}if(B==="\\"){y===p.length-1?x+="\\\\":$=!0;continue}if(B==="["){const[k,R,P,O]=(0,e.parseClass)(p,y);if(P){x+=k,v=v||R,y+=P-1,w=w||O;continue}}if(B==="*"){x+=S&&p==="*"?d:g,w=!0;continue}if(B==="?"){x+=f,w=!0;continue}x+=c(B)}return[x,(0,t.unescape)(p),!!w,v]}}return ve.AST=m,ve}D(Eu,"requireAst");var ke={},Cu;function wu(){if(Cu)return ke;Cu=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.escape=void 0;const e=D((t,{windowsPathsNoEscape:u=!1,magicalBraces:n=!1}={})=>n?u?t.replace(/[?*()[\]{}]/g,"[$&]"):t.replace(/[?*()[\]\\{}]/g,"\\$&"):u?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");return ke.escape=e,ke}D(wu,"require_escape");var Bu;function is(){return Bu||(Bu=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.unescape=e.escape=e.AST=e.Minimatch=e.match=e.makeRe=e.braceExpand=e.defaults=e.filter=e.GLOBSTAR=e.sep=e.minimatch=void 0;const t=us(),u=ns(),n=Eu(),s=wu(),i=ut(),o=D((b,r,h={})=>((0,u.assertValidPattern)(r),!h.nocomment&&r.charAt(0)==="#"?!1:new ce(r,h).match(b)),"minimatch");e.minimatch=o;const a=/^\*+([^+@!?\*\[\(]*)$/,l=D(b=>r=>!r.startsWith(".")&&r.endsWith(b),"starDotExtTest"),c=D(b=>r=>r.endsWith(b),"starDotExtTestDot"),f=D(b=>(b=b.toLowerCase(),r=>!r.startsWith(".")&&r.toLowerCase().endsWith(b)),"starDotExtTestNocase"),g=D(b=>(b=b.toLowerCase(),r=>r.toLowerCase().endsWith(b)),"starDotExtTestNocaseDot"),d=/^\*+\.\*+$/,m=D(b=>!b.startsWith(".")&&b.includes("."),"starDotStarTest"),C=D(b=>b!=="."&&b!==".."&&b.includes("."),"starDotStarTestDot"),p=/^\.\*+$/,w=D(b=>b!=="."&&b!==".."&&b.startsWith("."),"dotStarTest"),S=/^\*+$/,$=D(b=>b.length!==0&&!b.startsWith("."),"starTest"),x=D(b=>b.length!==0&&b!=="."&&b!=="..","starTestDot"),v=/^\?+([^+@!?\*\[\(]*)?$/,y=D(([b,r=""])=>{const h=P([b]);return r?(r=r.toLowerCase(),F=>h(F)&&F.toLowerCase().endsWith(r)):h},"qmarksTestNocase"),B=D(([b,r=""])=>{const h=O([b]);return r?(r=r.toLowerCase(),F=>h(F)&&F.toLowerCase().endsWith(r)):h},"qmarksTestNocaseDot"),k=D(([b,r=""])=>{const h=O([b]);return r?F=>h(F)&&F.endsWith(r):h},"qmarksTestDot"),R=D(([b,r=""])=>{const h=P([b]);return r?F=>h(F)&&F.endsWith(r):h},"qmarksTest"),P=D(([b])=>{const r=b.length;return h=>h.length===r&&!h.startsWith(".")},"qmarksTestNoExt"),O=D(([b])=>{const r=b.length;return h=>h.length===r&&h!=="."&&h!==".."},"qmarksTestNoExtDot"),j=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",T={win32:{sep:"\\"},posix:{sep:"/"}};e.sep=j==="win32"?T.win32.sep:T.posix.sep,e.minimatch.sep=e.sep,e.GLOBSTAR=Symbol("globstar **"),e.minimatch.GLOBSTAR=e.GLOBSTAR;const V="[^/]"+"*?",W="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",z="(?:(?!(?:\\/|^)\\.).)*?",ne=D((b,r={})=>h=>(0,e.minimatch)(h,b,r),"filter");e.filter=ne,e.minimatch.filter=e.filter;const ee=D((b,r={})=>Object.assign({},b,r),"ext"),Pe=D(b=>{if(!b||typeof b!="object"||!Object.keys(b).length)return e.minimatch;const r=e.minimatch;return Object.assign(D((F,E,A={})=>r(F,E,ee(b,A)),"m"),{Minimatch:class extends r.Minimatch{static{D(this,"Minimatch")}constructor(E,A={}){super(E,ee(b,A))}static defaults(E){return r.defaults(ee(b,E)).Minimatch}},AST:class extends r.AST{static{D(this,"AST")}constructor(E,A,L={}){super(E,A,ee(b,L))}static fromGlob(E,A={}){return r.AST.fromGlob(E,ee(b,A))}},unescape:D((F,E={})=>r.unescape(F,ee(b,E)),"unescape"),escape:D((F,E={})=>r.escape(F,ee(b,E)),"escape"),filter:D((F,E={})=>r.filter(F,ee(b,E)),"filter"),defaults:D(F=>r.defaults(ee(b,F)),"defaults"),makeRe:D((F,E={})=>r.makeRe(F,ee(b,E)),"makeRe"),braceExpand:D((F,E={})=>r.braceExpand(F,ee(b,E)),"braceExpand"),match:D((F,E,A={})=>r.match(F,E,ee(b,A)),"match"),sep:r.sep,GLOBSTAR:e.GLOBSTAR})},"defaults");e.defaults=Pe,e.minimatch.defaults=e.defaults;const Y=D((b,r={})=>((0,u.assertValidPattern)(b),r.nobrace||!/\{(?:(?!\{).)*\}/.test(b)?[b]:(0,t.expand)(b)),"braceExpand");e.braceExpand=Y,e.minimatch.braceExpand=e.braceExpand;const re=D((b,r={})=>new ce(b,r).makeRe(),"makeRe");e.makeRe=re,e.minimatch.makeRe=e.makeRe;const te=D((b,r,h={})=>{const F=new ce(r,h);return b=b.filter(E=>F.match(E)),F.options.nonull&&!b.length&&b.push(r),b},"match");e.match=te,e.minimatch.match=e.match;const oe=/[?*]|[+@!]\(.*?\)|\[|\]/,fe=D(b=>b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape");class ce{static{D(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(r,h={}){(0,u.assertValidPattern)(r),h=h||{},this.options=h,this.pattern=r,this.platform=h.platform||j,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!h.windowsPathsNoEscape||h.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!h.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!h.nonegate,this.comment=!1,this.empty=!1,this.partial=!!h.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=h.windowsNoMagicRoot!==void 0?h.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const r of this.set)for(const h of r)if(typeof h!="string")return!0;return!1}debug(...r){}make(){const r=this.pattern,h=this.options;if(!h.nocomment&&r.charAt(0)==="#"){this.comment=!0;return}if(!r){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],h.debug&&(this.debug=(...A)=>console.error(...A)),this.debug(this.pattern,this.globSet);const F=this.globSet.map(A=>this.slashSplit(A));this.globParts=this.preprocess(F),this.debug(this.pattern,this.globParts);let E=this.globParts.map((A,L,I)=>{if(this.isWindows&&this.windowsNoMagicRoot){const q=A[0]===""&&A[1]===""&&(A[2]==="?"||!oe.test(A[2]))&&!oe.test(A[3]),J=/^[a-z]:/i.test(A[0]);if(q)return[...A.slice(0,4),...A.slice(4).map(Z=>this.parse(Z))];if(J)return[A[0],...A.slice(1).map(Z=>this.parse(Z))]}return A.map(q=>this.parse(q))});if(this.debug(this.pattern,E),this.set=E.filter(A=>A.indexOf(!1)===-1),this.isWindows)for(let A=0;A<this.set.length;A++){const L=this.set[A];L[0]===""&&L[1]===""&&this.globParts[A][2]==="?"&&typeof L[3]=="string"&&/^[a-z]:$/i.test(L[3])&&(L[2]="?")}this.debug(this.pattern,this.set)}preprocess(r){if(this.options.noglobstar)for(let F=0;F<r.length;F++)for(let E=0;E<r[F].length;E++)r[F][E]==="**"&&(r[F][E]="*");const{optimizationLevel:h=1}=this.options;return h>=2?(r=this.firstPhasePreProcess(r),r=this.secondPhasePreProcess(r)):h>=1?r=this.levelOneOptimize(r):r=this.adjascentGlobstarOptimize(r),r}adjascentGlobstarOptimize(r){return r.map(h=>{let F=-1;for(;(F=h.indexOf("**",F+1))!==-1;){let E=F;for(;h[E+1]==="**";)E++;E!==F&&h.splice(F,E-F)}return h})}levelOneOptimize(r){return r.map(h=>(h=h.reduce((F,E)=>{const A=F[F.length-1];return E==="**"&&A==="**"?F:E===".."&&A&&A!==".."&&A!=="."&&A!=="**"?(F.pop(),F):(F.push(E),F)},[]),h.length===0?[""]:h))}levelTwoFileOptimize(r){Array.isArray(r)||(r=this.slashSplit(r));let h=!1;do{if(h=!1,!this.preserveMultipleSlashes){for(let E=1;E<r.length-1;E++){const A=r[E];E===1&&A===""&&r[0]===""||(A==="."||A==="")&&(h=!0,r.splice(E,1),E--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(h=!0,r.pop())}let F=0;for(;(F=r.indexOf("..",F+1))!==-1;){const E=r[F-1];E&&E!=="."&&E!==".."&&E!=="**"&&(h=!0,r.splice(F-1,2),F-=2)}}while(h);return r.length===0?[""]:r}firstPhasePreProcess(r){let h=!1;do{h=!1;for(let F of r){let E=-1;for(;(E=F.indexOf("**",E+1))!==-1;){let L=E;for(;F[L+1]==="**";)L++;L>E&&F.splice(E+1,L-E);let I=F[E+1];const q=F[E+2],J=F[E+3];if(I!==".."||!q||q==="."||q===".."||!J||J==="."||J==="..")continue;h=!0,F.splice(E,1);const Z=F.slice(0);Z[E]="**",r.push(Z),E--}if(!this.preserveMultipleSlashes){for(let L=1;L<F.length-1;L++){const I=F[L];L===1&&I===""&&F[0]===""||(I==="."||I==="")&&(h=!0,F.splice(L,1),L--)}F[0]==="."&&F.length===2&&(F[1]==="."||F[1]==="")&&(h=!0,F.pop())}let A=0;for(;(A=F.indexOf("..",A+1))!==-1;){const L=F[A-1];if(L&&L!=="."&&L!==".."&&L!=="**"){h=!0;const q=A===1&&F[A+1]==="**"?["."]:[];F.splice(A-1,2,...q),F.length===0&&F.push(""),A-=2}}}}while(h);return r}secondPhasePreProcess(r){for(let h=0;h<r.length-1;h++)for(let F=h+1;F<r.length;F++){const E=this.partsMatch(r[h],r[F],!this.preserveMultipleSlashes);if(E){r[h]=[],r[F]=E;break}}return r.filter(h=>h.length)}partsMatch(r,h,F=!1){let E=0,A=0,L=[],I="";for(;E<r.length&&A<h.length;)if(r[E]===h[A])L.push(I==="b"?h[A]:r[E]),E++,A++;else if(F&&r[E]==="**"&&h[A]===r[E+1])L.push(r[E]),E++;else if(F&&h[A]==="**"&&r[E]===h[A+1])L.push(h[A]),A++;else if(r[E]==="*"&&h[A]&&(this.options.dot||!h[A].startsWith("."))&&h[A]!=="**"){if(I==="b")return!1;I="a",L.push(r[E]),E++,A++}else if(h[A]==="*"&&r[E]&&(this.options.dot||!r[E].startsWith("."))&&r[E]!=="**"){if(I==="a")return!1;I="b",L.push(h[A]),E++,A++}else return!1;return r.length===h.length&&L}parseNegate(){if(this.nonegate)return;const r=this.pattern;let h=!1,F=0;for(let E=0;E<r.length&&r.charAt(E)==="!";E++)h=!h,F++;F&&(this.pattern=r.slice(F)),this.negate=h}matchOne(r,h,F=!1){const E=this.options;if(this.isWindows){const le=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),Su=!le&&r[0]===""&&r[1]===""&&r[2]==="?"&&/^[a-z]:$/i.test(r[3]),ot=typeof h[0]=="string"&&/^[a-z]:$/i.test(h[0]),ku=!ot&&h[0]===""&&h[1]===""&&h[2]==="?"&&typeof h[3]=="string"&&/^[a-z]:$/i.test(h[3]),me=Su?3:le?0:void 0,Fe=ku?3:ot?0:void 0;if(typeof me=="number"&&typeof Fe=="number"){const[at,Ou]=[r[me],h[Fe]];at.toLowerCase()===Ou.toLowerCase()&&(h[Fe]=at,Fe>me?h=h.slice(Fe):me>Fe&&(r=r.slice(me)))}}const{optimizationLevel:A=1}=this.options;A>=2&&(r=this.levelTwoFileOptimize(r)),this.debug("matchOne",this,{file:r,pattern:h}),this.debug("matchOne",r.length,h.length);for(var L=0,I=0,q=r.length,J=h.length;L<q&&I<J;L++,I++){this.debug("matchOne loop");var Z=h[I],K=r[L];if(this.debug(h,Z,K),Z===!1)return!1;if(Z===e.GLOBSTAR){this.debug("GLOBSTAR",[h,Z,K]);var U=L,ue=I+1;if(ue===J){for(this.debug("** at the end");L<q;L++)if(r[L]==="."||r[L]===".."||!E.dot&&r[L].charAt(0)===".")return!1;return!0}for(;U<q;){var se=r[U];if(this.debug(`
globstar while`,r,U,h,ue,se),this.matchOne(r.slice(U),h.slice(ue),F))return this.debug("globstar found match!",U,q,se),!0;if(se==="."||se===".."||!E.dot&&se.charAt(0)==="."){this.debug("dot detected!",r,U,h,ue);break}this.debug("globstar swallow a segment, and continue"),U++}return!!(F&&(this.debug(`
>>> no match, partial?`,r,U,h,ue),U===q))}let le;if(typeof Z=="string"?(le=K===Z,this.debug("string match",Z,K,le)):(le=Z.test(K),this.debug("pattern match",Z,K,le)),!le)return!1}if(L===q&&I===J)return!0;if(L===q)return F;if(I===J)return L===q-1&&r[L]==="";throw new Error("wtf?")}braceExpand(){return(0,e.braceExpand)(this.pattern,this.options)}parse(r){(0,u.assertValidPattern)(r);const h=this.options;if(r==="**")return e.GLOBSTAR;if(r==="")return"";let F,E=null;(F=r.match(S))?E=h.dot?x:$:(F=r.match(a))?E=(h.nocase?h.dot?g:f:h.dot?c:l)(F[1]):(F=r.match(v))?E=(h.nocase?h.dot?B:y:h.dot?k:R)(F):(F=r.match(d))?E=h.dot?C:m:(F=r.match(p))&&(E=w);const A=n.AST.fromGlob(r,this.options).toMMPattern();return E&&typeof A=="object"&&Reflect.defineProperty(A,"test",{value:E}),A}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const r=this.set;if(!r.length)return this.regexp=!1,this.regexp;const h=this.options,F=h.noglobstar?V:h.dot?W:z,E=new Set(h.nocase?["i"]:[]);let A=r.map(q=>{const J=q.map(K=>{if(K instanceof RegExp)for(const U of K.flags.split(""))E.add(U);return typeof K=="string"?fe(K):K===e.GLOBSTAR?e.GLOBSTAR:K._src});J.forEach((K,U)=>{const ue=J[U+1],se=J[U-1];K!==e.GLOBSTAR||se===e.GLOBSTAR||(se===void 0?ue!==void 0&&ue!==e.GLOBSTAR?J[U+1]="(?:\\/|"+F+"\\/)?"+ue:J[U]=F:ue===void 0?J[U-1]=se+"(?:\\/|\\/"+F+")?":ue!==e.GLOBSTAR&&(J[U-1]=se+"(?:\\/|\\/"+F+"\\/)"+ue,J[U+1]=e.GLOBSTAR))});const Z=J.filter(K=>K!==e.GLOBSTAR);if(this.partial&&Z.length>=1){const K=[];for(let U=1;U<=Z.length;U++)K.push(Z.slice(0,U).join("/"));return"(?:"+K.join("|")+")"}return Z.join("/")}).join("|");const[L,I]=r.length>1?["(?:",")"]:["",""];A="^"+L+A+I+"$",this.partial&&(A="^(?:\\/|"+L+A.slice(1,-1)+I+")$"),this.negate&&(A="^(?!"+A+").+$");try{this.regexp=new RegExp(A,[...E].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(r){return this.preserveMultipleSlashes?r.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(r)?["",...r.split(/\/+/)]:r.split(/\/+/)}match(r,h=this.partial){if(this.debug("match",r,this.pattern),this.comment)return!1;if(this.empty)return r==="";if(r==="/"&&h)return!0;const F=this.options;this.isWindows&&(r=r.split("\\").join("/"));const E=this.slashSplit(r);this.debug(this.pattern,"split",E);const A=this.set;this.debug(this.pattern,"set",A);let L=E[E.length-1];if(!L)for(let I=E.length-2;!L&&I>=0;I--)L=E[I];for(let I=0;I<A.length;I++){const q=A[I];let J=E;if(F.matchBase&&q.length===1&&(J=[L]),this.matchOne(J,q,h))return F.flipNegate?!0:!this.negate}return F.flipNegate?!1:this.negate}static defaults(r){return e.minimatch.defaults(r).Minimatch}}e.Minimatch=ce;var Oe=Eu();Object.defineProperty(e,"AST",{enumerable:!0,get:D(function(){return Oe.AST},"get")});var rt=wu();Object.defineProperty(e,"escape",{enumerable:!0,get:D(function(){return rt.escape},"get")});var Me=ut();Object.defineProperty(e,"unescape",{enumerable:!0,get:D(function(){return Me.unescape},"get")}),e.minimatch.AST=n.AST,e.minimatch.Minimatch=ce,e.minimatch.escape=s.escape,e.minimatch.unescape=i.unescape})(et)),et}D(is,"requireCommonjs");var nt,yu;function rs(){if(yu)return nt;yu=1;const e=ct,t=H,u=Tu.EventEmitter,n=is().Minimatch;class s extends u{static{D(this,"Walker")}constructor(c){c=c||{},super(c),this.isSymbolicLink=c.isSymbolicLink,this.path=c.path||process.cwd(),this.basename=t.basename(this.path),this.ignoreFiles=c.ignoreFiles||[".ignore"],this.ignoreRules={},this.parent=c.parent||null,this.includeEmpty=!!c.includeEmpty,this.root=this.parent?this.parent.root:this.path,this.follow=!!c.follow,this.result=this.parent?this.parent.result:new Set,this.entries=null,this.sawError=!1,this.exact=c.exact}sort(c,f){return c.localeCompare(f,"en")}emit(c,f){let g=!1;return this.sawError&&c==="error"||(c==="error"?this.sawError=!0:c==="done"&&!this.parent&&(f=Array.from(f).map(d=>/^@/.test(d)?`./${d}`:d).sort(this.sort),this.result=f),c==="error"&&this.parent?g=this.parent.emit("error",f):g=super.emit(c,f)),g}start(){return e.readdir(this.path,(c,f)=>c?this.emit("error",c):this.onReaddir(f)),this}isIgnoreFile(c){return c!=="."&&c!==".."&&this.ignoreFiles.indexOf(c)!==-1}onReaddir(c){this.entries=c,c.length===0?(this.includeEmpty&&this.result.add(this.path.slice(this.root.length+1)),this.emit("done",this.result)):this.entries.some(g=>this.isIgnoreFile(g))?this.addIgnoreFiles():this.filterEntries()}addIgnoreFiles(){const c=this.entries.filter(d=>this.isIgnoreFile(d));let f=c.length;const g=D(()=>{--f===0&&this.filterEntries()},"then");c.forEach(d=>this.addIgnoreFile(d,g))}addIgnoreFile(c,f){const g=t.resolve(this.path,c);e.readFile(g,"utf8",(d,m)=>d?this.emit("error",d):this.onReadIgnoreFile(c,m,f))}onReadIgnoreFile(c,f,g){const d={matchBase:!0,dot:!0,flipNegate:!0,nocase:!0},m=f.split(/\r?\n/).filter(C=>!/^#|^$/.test(C.trim())).map(C=>new n(C.trim(),d));this.ignoreRules[c]=m,g()}filterEntries(){const c=this.entries.map(g=>{const d=this.filterEntry(g),m=this.filterEntry(g,!0);return d||m?[g,d,m]:!1}).filter(g=>g);let f=c.length;if(f===0)this.emit("done",this.result);else{const g=D(()=>{--f===0&&this.emit("done",this.result)},"then");c.forEach(d=>{const m=d[0],C=d[1],p=d[2];this.stat({entry:m,file:C,dir:p},g)})}}onstat({st:c,entry:f,file:g,dir:d,isSymbolicLink:m},C){const p=this.path+"/"+f;c.isDirectory()?d?this.walker(f,{isSymbolicLink:m,exact:g||this.filterEntry(f+"/")},C):C():(g&&this.result.add(p.slice(this.root.length+1)),C())}stat({entry:c,file:f,dir:g},d){const m=this.path+"/"+c;e.lstat(m,(C,p)=>{if(C)this.emit("error",C);else{const w=p.isSymbolicLink();this.follow&&w?e.stat(m,(S,$)=>{S?this.emit("error",S):this.onstat({st:$,entry:c,file:f,dir:g,isSymbolicLink:w},d)}):this.onstat({st:p,entry:c,file:f,dir:g,isSymbolicLink:w},d)}})}walkerOpt(c,f){return{path:this.path+"/"+c,parent:this,ignoreFiles:this.ignoreFiles,follow:this.follow,includeEmpty:this.includeEmpty,...f}}walker(c,f,g){new s(this.walkerOpt(c,f)).on("done",g).start()}filterEntry(c,f,g){let d=!0;if(this.parent&&this.parent.filterEntry){const m=this.basename+"/"+c,C=g||c;if(d=this.parent.filterEntry(m,f,C),!d&&!this.exact)return!1}return this.ignoreFiles.forEach(m=>{this.ignoreRules[m]&&this.ignoreRules[m].forEach(C=>{if(C.negate!==d){const p=g&&C.globParts.some(S=>S.length<=(S.slice(-1)[0]?1:2));(C.match("/"+c)||C.match(c)||!!f&&(C.match("/"+c+"/")||C.match(c+"/")||C.negate&&(C.match("/"+c,!0)||C.match(c,!0))||p&&(C.match("/"+g+"/")||C.match(g+"/")||C.negate&&(C.match("/"+g,!0)||C.match(g,!0)))))&&(d=C.negate)}})}),d}}class i extends s{static{D(this,"WalkerSync")}start(){return this.onReaddir(e.readdirSync(this.path)),this}addIgnoreFile(c,f){const g=t.resolve(this.path,c);this.onReadIgnoreFile(c,e.readFileSync(g,"utf8"),f)}stat({entry:c,file:f,dir:g},d){const m=this.path+"/"+c;let C=e.lstatSync(m);const p=C.isSymbolicLink();this.follow&&p&&(C=e.statSync(m)),this.onstat({st:C,entry:c,file:f,dir:g,isSymbolicLink:p},d)}walker(c,f,g){new i(this.walkerOpt(c,f)).start(),g()}}const o=D((l,c)=>{const f=new Promise((g,d)=>{new s(l).on("done",g).on("error",d).start()});return c?f.then(g=>c(null,g),c):f},"walk"),a=D(l=>new i(l).start().result,"walkSync");return nt=o,o.sync=a,o.Walker=s,o.WalkerSync=i,nt}D(rs,"requireLib$2");var st,bu;function os(){return bu||(bu=1,st={META:Symbol("proc-log.meta"),output:{LEVELS:["standard","error","buffer","flush"],KEYS:{standard:"standard",error:"error",buffer:"buffer",flush:"flush"},standard:D(function(...t){return process.emit("output","standard",...t)},"standard"),error:D(function(...t){return process.emit("output","error",...t)},"error"),buffer:D(function(...t){return process.emit("output","buffer",...t)},"buffer"),flush:D(function(...t){return process.emit("output","flush",...t)},"flush")},log:{LEVELS:["notice","error","warn","info","verbose","http","silly","timing","pause","resume"],KEYS:{notice:"notice",error:"error",warn:"warn",info:"info",verbose:"verbose",http:"http",silly:"silly",timing:"timing",pause:"pause",resume:"resume"},error:D(function(...t){return process.emit("log","error",...t)},"error"),notice:D(function(...t){return process.emit("log","notice",...t)},"notice"),warn:D(function(...t){return process.emit("log","warn",...t)},"warn"),info:D(function(...t){return process.emit("log","info",...t)},"info"),verbose:D(function(...t){return process.emit("log","verbose",...t)},"verbose"),http:D(function(...t){return process.emit("log","http",...t)},"http"),silly:D(function(...t){return process.emit("log","silly",...t)},"silly"),timing:D(function(...t){return process.emit("log","timing",...t)},"timing"),pause:D(function(){return process.emit("log","pause")},"pause"),resume:D(function(){return process.emit("log","resume")},"resume")},time:{LEVELS:["start","end"],KEYS:{start:"start",end:"end"},start:D(function(t,u){process.emit("time","start",t);function n(){return process.emit("time","end",t)}if(D(n,"end"),typeof u=="function"){const s=u();return s&&s.finally?s.finally(n):(n(),s)}return n},"start"),end:D(function(t){return process.emit("time","end",t)},"end")},input:{LEVELS:["start","end","read"],KEYS:{start:"start",end:"end",read:"read"},start:D(function(...t){let u;typeof t[0]=="function"&&(u=t.shift()),process.emit("input","start",...t);function n(){return process.emit("input","end",...t)}if(D(n,"end"),typeof u=="function"){const s=u();return s&&s.finally?s.finally(n):(n(),s)}return n},"start"),end:D(function(...t){return process.emit("input","end",...t)},"end"),read:D(function(...t){let u,n;const s=new Promise((i,o)=>{u=i,n=o});return process.emit("input","read",u,n,...t),s},"read")}}),st}D(os,"requireLib$1");var it,Au;function as(){if(Au)return it;Au=1;const{Walker:e}=rs(),{lstatSync:t,readFileSync:u}=ct,{basename:n,dirname:s,extname:i,join:o,relative:a,resolve:l,sep:c}=H,{log:f}=os(),g=Symbol("npm-packlist.rules.default"),d=Symbol("npm-packlist.rules.strict"),m=D(v=>/\*/.test(v),"nameIsBadForWindows"),C=[".npmignore",".gitignore","**/.git","**/.svn","**/.hg","**/CVS","**/.git/**","**/.svn/**","**/.hg/**","**/CVS/**","/.lock-wscript","/.wafpickle-*","/build/config.gypi","npm-debug.log","**/.npmrc",".*.swp",".DS_Store","**/.DS_Store/**","._*","**/._*/**","*.orig","/archived-packages/**"],p=["/.git"],w=D(v=>v.split("\\").join("/"),"normalizePath"),S=D((v,y,B=[])=>{for(const O of[".npmignore",".gitignore"])try{const j=u(o(v,O),{encoding:"utf8"});B.push(j);break}catch(j){if(j.code!=="ENOENT")throw j}if(!y)return B;const k=y.split(c,1)[0],R=o(v,k),P=a(R,o(v,y));return S(R,P,B)},"readOutOfTreeIgnoreFiles");class $ extends e{static{D(this,"PackWalker")}constructor(y,B){const k={...B,includeEmpty:!1,follow:!1,path:l(B?.path||y.path).replace(/\\/g,"/"),ignoreFiles:B?.ignoreFiles||[g,"package.json",".npmignore",".gitignore",d]};super(k),this.isPackage=k.isPackage,this.seen=k.seen||new Set,this.tree=y,this.requiredFiles=k.requiredFiles||[];const R=[];if(k.prefix&&k.workspaces){const P=w(k.path),O=w(k.prefix),j=k.workspaces.map(T=>w(T));if(P!==O&&j.includes(P)){const T=a(k.prefix,s(k.path));R.push(...S(k.prefix,T))}else P===O&&R.push(...j.map(T=>w(a(k.path,T))))}this.injectRules(g,[...C,...R]),this.isPackage||this.injectRules(d,[...p,...this.requiredFiles.map(P=>`!${P}`)])}addIgnoreFile(y,B){return y!=="package.json"||!this.isPackage?super.addIgnoreFile(y,B):this.processPackage(B)}emit(y,B){return y!=="done"||!this.isPackage?super.emit(y,B):(this.gatherBundles().then(()=>{super.emit("done",this.result)}),!0)}filterEntries(){return this.ignoreRules["package.json"]?(this.ignoreRules[".npmignore"]=null,this.ignoreRules[".gitignore"]=null):this.ignoreRules[".npmignore"]?this.ignoreRules[".gitignore"]=null:this.ignoreRules[".gitignore"]&&!this.ignoreRules[".npmignore"]&&f.warn("gitignore-fallback","No .npmignore file found, using .gitignore for file exclusion. Consider creating a .npmignore file to explicitly control published files."),super.filterEntries()}onstat(y,B){return!y.st.isFile()&&!y.st.isDirectory()?B():super.onstat(y,B)}stat(y,B){return m(y.entry)?B():super.stat(y,B)}walkerOpt(y,B){let k=null;if(this.tree.workspaces){const R=[...this.tree.workspaces.values()].map(O=>O.replace(/\\/g,"/")),P=o(this.path,y).replace(/\\/g,"/");R.includes(P)&&(k=[g,"package.json",".npmignore",".gitignore",d])}else k=[g,".npmignore",".gitignore",d];return{...super.walkerOpt(y,B),ignoreFiles:k,requiredFiles:this.requiredFiles.map(R=>a(R,y)===".."?a(y,R).replace(/\\/g,"/"):!1).filter(Boolean)}}walker(y,B,k){new $(this.tree,this.walkerOpt(y,B)).on("done",k).start()}sort(y,B){const k=i(y).toLowerCase(),R=i(B).toLowerCase(),P=n(y).toLowerCase(),O=n(B).toLowerCase();return k.localeCompare(R,"en")||P.localeCompare(O,"en")||y.localeCompare(B,"en")}injectRules(y,B,k=()=>{}){this.onReadIgnoreFile(y,`${B.join(`
`)}
`,k)}processPackage(y){const{bin:B,browser:k,files:R,main:P}=this.tree.package,O=[],j=[...p,"!/package.json","!/readme{,.*[^~$]}","!/copying{,.*[^~$]}","!/license{,.*[^~$]}","!/licence{,.*[^~$]}","/.git","/node_modules",".npmrc","/package-lock.json","/yarn.lock","/pnpm-lock.yaml","/bun.lockb"];if(R){for(let T of R){T.startsWith("./")&&(T=T.slice(1)),T.endsWith("/*")&&(T+="*");const M=`!${T}`;try{const V=t(o(this.path,T.replace(/^!+/,"")).replace(/\\/g,"/"));V.isFile()?(j.unshift(M),this.requiredFiles.push(T.startsWith("/")?T.slice(1):T)):V.isDirectory()&&(O.push(M),O.push(`${M}/**`))}catch{O.push(M)}}this.injectRules("package.json",["*",...O])}if(k&&j.push(`!/${k}`),P&&j.push(`!/${P}`),B)for(const T in B)j.push(`!/${B[T]}`);this.injectRules(d,j,y)}async gatherBundles(){if(this.seen.has(this.tree))return;this.seen.add(this.tree);let y;if(this.tree.isProjectRoot){const{bundleDependencies:B}=this.tree.package;y=B||[]}else{const{dependencies:B,optionalDependencies:k}=this.tree.package;y=Object.keys(B||{}).concat(Object.keys(k||{}))}for(const B of y){const k=this.tree.edgesOut.get(B);if(!k||k.peer||k.dev)continue;const R=this.tree.edgesOut.get(B).to;if(!R)continue;const P=R.path,O=R.target,j={path:P,isPackage:!0,ignoreFiles:[],seen:this.seen};R.isLink&&j.ignoreFiles.push(g),j.ignoreFiles.push("package.json"),R.isLink&&(j.ignoreFiles.push(".npmignore"),j.ignoreFiles.push(".gitignore")),j.ignoreFiles.push(d);const T=new $(O,j),M=await new Promise((W,z)=>{T.on("error",z),T.on("done",W),T.start()}),V=a(this.root,T.path);for(const W of M)this.result.add(o(V,W).replace(/\\/g,"/"))}}}const x=D((v,y,B)=>{typeof y=="function"&&(B=y,y={});const k=new Promise((R,P)=>{new $(v,{...y,isPackage:!0}).on("done",R).on("error",P).start()});return B?k.then(R=>B(null,R),B):k},"walk");return it=x,x.Walker=$,it}D(as,"requireLib");var Ds=as(),cs=Kt(Ds);const ls=new Map,vu=D((e,t)=>cs({path:e,package:t,edgesOut:ls}),"getNpmPacklist"),hs=process.cwd(),$u=D(e=>Ee.relative(hs,e),"cwdPath"),ps=D(async(e,t,u)=>{const[n,s]=await Promise.all([vu(e,u),vu(t,u)]);console.log(`Linking ${Xe(u.name)} in publish mode:`),await Promise.all(s.map(async i=>{const o=Ee.join(t,i),a=Ee.join(e,i);await Dt.mkdir(Ee.dirname(a),{recursive:!0}),await Zn(o,a);const l=n.indexOf(i);l!==-1&&n.splice(l,1),console.log(`  ${nu("\u2714")}`,Be($u(a)),"\u2192",Be($u(o)))})),await Promise.all(n.map(async i=>{const o=Ee.join(e,i);await Dt.rm(o).catch(()=>{})}))},"hardlinkPackage"),fs=D(async(e,t)=>(await Q.stat(e).catch(()=>null))?.isDirectory()?(await Q.realpath(e)).startsWith(t):!1,"isValidSetup"),Fs=D(async(e,t)=>{const u=H.resolve(e,t),n=await Du(u),s=H.join(e,"node_modules/"),i=H.join(s,n.name);if(!await fs(i,s)){console.error(De`
			Error: Package ${Xe(n.name)} is not set up

			${Gn("Setup instructions")}
			1. In the Dependency package, create a tarball:
			  ${Ke("$ npm pack")}

			2. In the Consuming package, install the tarball and link the Dependency:
			  ${Ke("$ npm install --no-save <dependency-tarball>")}
			  ${Ke("$ npx link publish <dependency-path>")}

			3. Start developing!

			Learn more: https://npmjs.com/link
			`);return}await ps(i,u,n)},"linkPublishMode"),ds=Zt({name:"publish",parameters:["<package paths...>"],flags:{},help:{description:"Link a package to simulate an environment similar to `npm install`"}}),gs=D(async(e,t)=>{t.length>0&&await Promise.all(t.map(u=>Fs(e,u)))},"publishHandler");(async()=>{const e=Yt({name:"link",parameters:["[package paths...]"],flags:{deep:{type:Boolean,alias:"d",description:"Run `npx link` on dependencies if they have a link.config.json"}},help:{description:"A better `npm link` -- symlink local dependencies to the current project",render:D((u,n)=>(u[0].data=`npx link
`,u.splice(2,0,{type:"section",data:{title:"Website",body:"https://www.npmjs.com/package/link"}}),n.render(u)),"render")},commands:[ds]}),t=await Q.realpath(process.cwd());if(e.command)e.command==="publish"&&await gs(t,e._);else{const{packagePaths:u}=e._;if(u.length>0){await Promise.all(u.map(s=>lu(t,s,e.flags)));return}const n=await ru(t);if(!n){console.warn(De`
				Warning: Config file "link.config.json" not found in current directory.
							Read the documentation to learn more: https://www.npmjs.com/package/link
				`),e.showHelp();return}await hu(t,n,{deep:e.flags.deep})}})().catch(e=>{console.error("Error:",e.message),process.exit(1)});
